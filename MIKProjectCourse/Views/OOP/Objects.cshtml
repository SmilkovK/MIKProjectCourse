@{
    ViewData["Title"] = "OOP - Објекти";
}

<body data-topic="objects">
    <div class="container">
        <h1 class="mb-4 text-center">Објекти: Оживување на шаблоните</h1>

        <p><strong>Објектите</strong> се <strong>реалните нешта</strong> што ги креираш од шаблонот на една класа. Ако класата е рецепт, тогаш објектите се вистинските јадења што ги готвиш според тој рецепт.</p>

        <div class="note-box">
            <strong>Забелешка:</strong> Во лекцијата за
            <a href="@Url.Action("Classes", "OOP")" class="ajax-link"><strong>Класи</strong></a>,
            накратко ги спомнавме објектите кога креиравме вистински студенти и производи од шаблони на класи.
            Сега ќе навлеземе <strong>подлабоко</strong> во тоа што навистина се објектите и како функционираат.
        </div>

        <p>Објекти користиш секојдневно во реалниот живот:</p>
        <ul>
            <li><strong>Колаче</strong> направено со калап за колачи (класа)</li>
            <li><strong>Конкретен автомобил</strong> изграден според дизајн (класа)</li>
            <li>Твојот <strong>Instagram профил</strong> креиран од шаблонот User (класа)</li>
            <li>Оваа <strong>конкретна веб-страница</strong> вчитана од шаблонот Page (класа)</li>
        </ul>

        <h2 class="text-center">Што е објект?</h2>
        <p>Објект е <strong>инстанца</strong> од една класа. Размислувај вака:</p>

        <div class="code-container">
            <div class="code-header">Однос помеѓу класа и објект</div>
            <div class="code-content">
<pre>
КЛАСА (Шаблон)               ОБЈЕКТИ (Вистински нешта)
──────────────────────────────────────────────────────
Калап за колачи              Вистински колачи
Рецепт                        Колачи што ги печеш
Дизајн на автомобил          Автомобили на пат
Формулар за студент          Индивидуални студенти

ЕДНА класа може да креира     МНОГУ објекти
</pre>
            </div>
        </div>

        <p><strong>Клучна идеја:</strong> Класите дефинираат ШТО се нештата, а објектите се ВИСТИНСКИТЕ нешта со сопствени податоци.</p>

        <h2 class="text-center">Креирање објекти: клучниот збор „new“</h2>
        <p>Објектите се креираат со клучниот збор <code>new</code>. Тоа е како да кажеш: „Направи ми ново вакво нешто“.</p>

        <div class="code-container">
            <div class="code-header">Синтакса за креирање објекти</div>
            <div class="code-content">
<pre>
// Дефиниција на класа (шаблон)
public class Student
{
    public string Name;
    public int Age;
}

// Креирање објекти (вистински студенти)
Student student1 = new Student();
Student student2 = new Student();
Student student3 = new Student();

// Секој објект е ОДВОЕН и УНИКАТЕН
</pre>
            </div>
        </div>

        <h2 class="text-center">Пример 1: Објекти Student – подлабоко објаснување</h2>
        <p>Во лекцијата за класи креиравме студенти. Ајде да видиме што тоа навистина значи:</p>

        <div class="code-container">
            <div class="form-check form-switch mb-2">
                <input class="form-check-input" type="checkbox" id="example1Toggle" onchange="oopObjects.convertCode('example1')">
                <label class="form-check-label" for="example1Toggle">Прикажи визуелизација на меморија</label>
            </div>
            <div class="code-content">
<pre class="codeBlock" id="example1Code">
// Дефиниција на класа (шаблон) – постои САМО ЕДНАШ
public class Student
{
    public string Name;
    public int Age;
    public string Major;

    public void Introduce()
    {
        Console.WriteLine("Здраво, јас сум " + Name + ", студирам " + Major);
    }
}

// Креирање ТРИ одвоени објекти
Student student1 = new Student();
student1.Name = "Alice";
student1.Age = 20;
student1.Major = "Компјутерски науки";

Student student2 = new Student();
student2.Name = "Bob";
student2.Age = 22;
student2.Major = "Математика";

Student student3 = new Student();
student3.Name = "Charlie";
student3.Age = 21;
student3.Major = "Биологија";

// Секој објект работи независно
student1.Introduce();
student2.Introduce();
student3.Introduce();
</pre>
            </div>
            <div class="result-box" id="example1Result">
                <strong>Излез:</strong><br>
                Здраво, јас сум Alice, студирам Компјутерски науки<br>
                Здраво, јас сум Bob, студирам Математика<br>
                Здраво, јас сум Charlie, студирам Биологија<br><br>
                <em>Клучен увид:</em> Имаме ЕДНА класа Student, но ТРИ различни објекти во меморија. Секој објект има сопствен простор за Name, Age и Major.
            </div>
        </div>

        <h2 class="text-center">Пример 2: Независност на објекти</h2>
        <p>Објектите не влијаат еден на друг – тие се целосно независни:</p>

        <div class="code-container">
            <div class="code-header">Демо за независни објекти</div>
            <div class="code-content">
<pre>
public class Counter
{
    public int Value = 0;

    public void Increment()
    {
        Value++;
        Console.WriteLine("Бројачот сега е: " + Value);
    }
}

Counter counterA = new Counter();
Counter counterB = new Counter();

counterA.Increment();
counterA.Increment();

Console.WriteLine(counterA.Value); // 2
Console.WriteLine(counterB.Value); // 0
</pre>
            </div>
        </div>

        <h2 class="text-center">Најважни концепти за објекти</h2>
        <div class="code-container">
            <div class="code-header">Основи за објекти</div>
            <div class="code-content">
<pre>
1. ОБЈЕКТ = ИНСТАНЦА ОД КЛАСА
2. СЕ КРЕИРА СО 'new'
3. СЕКОЈ ОБЈЕКТ ИМА СОПСТВЕНА МЕМОРИЈА
4. ОБЈЕКТИТЕ СЕ НЕЗАВИСНИ
5. КОДОТ НА КЛАСАТА ПОСТОИ САМО ЕДНАШ
</pre>
            </div>
        </div>

        <h2 class="text-center">Резиме: Објекти</h2>
        <ul>
            <li><strong>Објектите се реални инстанци</strong> креирани од класи</li>
            <li>Се креираат со <code>new</code></li>
            <li>Секој објект има сопствени податоци</li>
            <li>Промена на еден објект не влијае на друг</li>
            <li>Класата е шаблон, објектите се вистинските нешта</li>
        </ul>

        <div class="next-steps">
            <h3 class="text-center">Што следува?</h3>
            <p>Сега кога ги разбра објектите, подготвен си за:</p>
            <ul>
                <li><strong>Наследување</strong> – креирање нови класи од постоечки</li>
            </ul>
        </div>

        <div class="navigation-buttons">
            <a href="@Url.Action("Constructors", "OOP")" class="btn btn-outline-primary ajax-link">← Конструктори</a>
            <a href="@Url.Action("Inheritance", "OOP")" class="btn btn-primary ajax-link">Наследување →</a>
        </div>
    </div>


<style>
    .container {
        max-width: 800px;
        padding: 20px;
        background-color: var(--bs-body-bg);
    }

    h1, h2, h3 {
        color: var(--bs-heading-color);
        margin-bottom: 15px;
    }

    h1 {
        border-bottom: 2px solid var(--bs-primary);
        padding-bottom: 10px;
    }

    p, li, code {
        color: var(--bs-body-color);
        line-height: 1.6;
    }

    .note-box {
        background-color: rgba(255, 193, 7, 0.1);
        border: 1px solid var(--bs-warning);
        border-radius: 5px;
        padding: 15px;
        margin: 20px 0;
    }

    .note-box a {
        color: var(--bs-warning);
        text-decoration: underline;
    }

    .code-container {
        margin: 25px 0;
        border: 1px solid var(--bs-border-color);
        border-radius: 5px;
        overflow: hidden;
        background-color: var(--code-bg);
    }

    .code-header {
        background-color: var(--code-header-bg);
        padding: 10px 15px;
        border-bottom: 1px solid var(--bs-border-color);
        font-family: 'SFMono-Regular', Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
        font-size: 0.9rem;
        color: var(--bs-body-color);
    }

    .code-content {
        padding: 15px;
        overflow-x: auto;
    }

    pre {
        margin: 0;
        white-space: pre-wrap;
        background-color: transparent;
        font-family: 'SFMono-Regular', Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    }

    .result-box {
        padding: 10px 15px;
        background-color: rgba(0, 123, 255, 0.1);
        border-top: 1px solid var(--bs-border-color);
        font-size: 0.95rem;
    }

    .quiz-container {
        background-color: rgba(108, 117, 125, 0.1);
        border: 1px solid var(--bs-secondary);
        border-radius: 5px;
        padding: 15px;
        margin: 20px 0;
    }

    .quiz-question {
        margin-bottom: 15px;
    }

    .quiz-options {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        margin-top: 10px;
    }

    .quiz-result {
        min-height: 30px;
        padding: 5px 10px;
        border-radius: 4px;
        font-weight: 500;
    }

    .quiz-result.correct {
        background-color: rgba(40, 167, 69, 0.1);
        color: var(--bs-success);
        border: 1px solid var(--bs-success);
    }

    .quiz-result.incorrect {
        background-color: rgba(220, 53, 69, 0.1);
        color: var(--bs-danger);
        border: 1px solid var(--bs-danger);
    }

    .next-steps {
        background-color: rgba(111, 66, 193, 0.1);
        border: 1px solid var(--bs-indigo);
        border-radius: 5px;
        padding: 15px;
        margin: 20px 0;
    }

    .navigation-buttons {
        display: flex;
        justify-content: space-between;
        margin-top: 30px;
    }

    .btn {
        padding: 8px 20px;
        border-radius: 4px;
        font-weight: 500;
        text-decoration: none;
    }

    .btn-primary {
        background-color: var(--bs-primary);
        border-color: var(--bs-primary);
        color: #fff;
    }

    .btn-outline-primary {
        color: var(--bs-primary);
        border-color: var(--bs-primary);
        background-color: transparent;
    }

    .btn-outline-secondary {
        color: var(--bs-secondary);
        border-color: var(--bs-secondary);
        background-color: transparent;
    }

    .btn-sm {
        padding: 5px 10px;
        font-size: 0.875rem;
    }

    .text-center {
        text-align: center;
    }

    .correct-text {
        color: var(--bs-success);
        font-weight: 500;
    }

    .error-text {
        color: var(--bs-danger);
        font-weight: 500;
    }
</style>

<script>
    // Create a namespace for OOP Objects page
    window.oopObjects = {
        // Interactive walkthrough for object creation
        objectSteps: [
            {
                code: `public class Book
{
    public string Title;
    public string Author;
    
    public void Display()
    {
        Console.WriteLine(Title + " by " + Author);
    }
}

        // Ќе создадеме книги чекор по чекор
// Book book1 = new Book();
// Book book2 = new Book();`,
                vars: `MEMORY LAYOUT:
[Class Area] Book class definition loaded
[Heap] No book objects yet`,
                exp: "First, the Book class is loaded into memory. This happens ONCE, no matter how many objects we create."
            },
            {
                code: `public class Book
{
    public string Title;
    public string Author;
    
    public void Display()
    {
        Console.WriteLine(Title + " by " + Author);
    }
}

        // Ќе создадеме книги чекор по чекор
Book book1 = new Book();
// Book book2 = new Book();`,
                vars: `MEMORY LAYOUT:
[Class Area] Book class definition
[Heap] book1 object created
           ┌─────────────┐
 book1 →   │ Title: null │
           │ Author: null│
           └─────────────┘`,
                exp: "We create the FIRST book object using 'new Book()'. The computer allocates memory for it on the heap. Right now, its Title and Author are empty (null)."
            },
            {
                code: `public class Book
{
    public string Title;
    public string Author;
    
    public void Display()
    {
        Console.WriteLine(Title + " by " + Author);
    }
}

// Ќе создадеме книги чекор по чекор
Book book1 = new Book();
book1.Title = "Harry Potter";
book1.Author = "J.K. Rowling";
// Book book2 = new Book();`,
                vars: `MEMORY LAYOUT:
[Class Area] Book class definition
[Heap] book1 object with data
           ┌────────────────────────┐
 book1 →   │ Title: "Harry Potter"  │
           │ Author: "J.K. Rowling" │
           └────────────────────────┘`,
                exp: "We fill book1 with actual data. Each object stores its OWN data. book1 now has Title='Harry Potter' and Author='J.K. Rowling' in its memory space."
            },
            {
                code: `public class Book
{
    public string Title;
    public string Author;
    
    public void Display()
    {
        Console.WriteLine(Title + " by " + Author);
    }
}

// Ќе создадеме книги чекор по чекор
Book book1 = new Book();
book1.Title = "Harry Potter";
book1.Author = "J.K. Rowling";
Book book2 = new Book();`,
                vars: `MEMORY LAYOUT:
[Class Area] Book class definition (SHARED)
[Heap] TWO separate objects
           ┌────────────────────────┐    ┌─────────────┐
 book1 →   │ Title: "Harry Potter"  │    │ Title: null │ ← book2
           │ Author: "J.K. Rowling" │    │ Author: null│
           └────────────────────────┘    └─────────────┘`,
                exp: "We create a SECOND book object. book2 is COMPLETELY SEPARATE from book1. They both use the SAME Book class code, but have DIFFERENT memory spaces for their data."
            },
            {
                code: `public class Book
{
    public string Title;
    public string Author;
    
    public void Display()
    {
        Console.WriteLine(Title + " by " + Author);
    }
}

// Ќе создадеме книги чекор по чекор
Book book1 = new Book();
book1.Title = "Harry Potter";
book1.Author = "J.K. Rowling";
Book book2 = new Book();
book2.Title = "The Hobbit";
book2.Author = "J.R.R. Tolkien";`,
                vars: `MEMORY LAYOUT:
[Class Area] Book class definition (SHARED)
[Heap] TWO separate objects with different data
           ┌────────────────────────┐    ┌───────────────────────┐
 book1 →   │ Title: "Harry Potter"  │    │ Title: "The Hobbit"   │ ← book2
           │ Author: "J.K. Rowling" │    │ Author: "J.R.R.Tolkien"│
           └────────────────────────┘    └───────────────────────┘`,
                exp: "We fill book2 with DIFFERENT data. book1 and book2 are INDEPENDENT objects. Changing book2 doesn't affect book1, and vice versa. This is the power of objects!"
            }
        ],

        // Code examples for toggles
        simpleExamples: {
                    example1: `// Дефиниција на класа (план) - постои ЕДНА копија
public class Student
{
    public string Name;
    public int Age;
    public string Major;
    
    public void Introduce()
    {
        Console.WriteLine("Hi, I'm " + Name + ", studying " + Major);
    }
}

        // Креирање на три одделни објекти
Student student1 = new Student();
student1.Name = "Alice";
student1.Age = 20;
student1.Major = "Computer Science";

Student student2 = new Student();
student2.Name = "Bob";
student2.Age = 22;
student2.Major = "Mathematics";

Student student3 = new Student();
student3.Name = "Charlie";
student3.Age = 21;
student3.Major = "Biology";`,
            example2: `public class Product
{
    public string Name;
    public decimal Price;
    public int Stock;
    
    public bool IsAvailable()
    {
        return Stock > 0;
    }
    
    public void Sell(int quantity)
    {
        if (quantity <= Stock)
        {
            Stock -= quantity;
            decimal total = Price * quantity;
            Console.WriteLine("Sold " + quantity + " of " + Name + " for $" + total);
        }
        else
        {
            Console.WriteLine("Not enough " + Name + " in stock!");
        }
    }
}

        // Вистински инвентар - секој производ е ПОСЕБЕН објект
Product laptop = new Product();
laptop.Name = "Dell XPS 13";
laptop.Price = 999.99m;
laptop.Stock = 10;

Product phone = new Product();
phone.Name = "iPhone 15";
phone.Price = 799.99m;
phone.Stock = 5;`,
            example3: `public class Person
{
    public string Name;
    public int Age;
    
    public void Birthday()
    {
        Age++;
        Console.WriteLine(Name + " is now " + Age + " years old!");
    }
}

// Создади објект person
Person person = new Person();
person.Name = "Charlie";
person.Age = 25;`
        },

        completeExamples: {
                    example1: `//Дефиниција на класа (план) - постои ЕДНА копија
        public class Student
{
    public string Name;
    public int Age;
    public string Major;
    
    public void Introduce()
    {
        Console.WriteLine("Hi, I'm " + Name + ", studying " + Major);
    }
}

        // Креирање на три одделни објекти
Student student1 = new Student();
student1.Name = "Alice";
student1.Age = 20;
student1.Major = "Computer Science";

Student student2 = new Student();
student2.Name = "Bob";
student2.Age = 22;
student2.Major = "Mathematics";

Student student3 = new Student();
student3.Name = "Charlie";
student3.Age = 21;
student3.Major = "Biology";

        // Секој објект работи независно
student1.Introduce();  // Uses Alice's data
student2.Introduce();  // Uses Bob's data
student3.Introduce();  // Uses Charlie's data`,
            example2: `public class Product
{
    public string Name;
    public decimal Price;
    public int Stock;
    
    public bool IsAvailable()
    {
        return Stock > 0;
    }
    
    public void Sell(int quantity)
    {
        if (quantity <= Stock)
        {
            Stock -= quantity;  // Reduce stock
            decimal total = Price * quantity;
            Console.WriteLine("Sold " + quantity + " of " + Name + " for $" + total);
        }
        else
        {
            Console.WriteLine("Not enough " + Name + " in stock!");
        }
    }
}

        // Вистински инвентар - секој производ е ПОСЕБЕН објект
Product laptop = new Product();
laptop.Name = "Dell XPS 13";
laptop.Price = 999.99m;
        laptop.Stock = 10;  // објектот Laptop има Stock = 10

Product phone = new Product();
phone.Name = "iPhone 15";
phone.Price = 799.99m;
phone.Stock = 5;    // објектот Phone има Stock = 5

// Customers buy products
Console.WriteLine("=== Sales Transactions ===");
laptop.Sell(3);    // Намалува laptop.Stock до 7
phone.Sell(2);     // Намалува phone.Stock до 3
        laptop.Sell(8);    // Треба да е грешно - нема доволно залихи

Console.WriteLine("\n=== Remaining Stock ===");
Console.WriteLine(laptop.Name + ": " + laptop.Stock + " left");
Console.WriteLine(phone.Name + ": " + phone.Stock + " left");`,
            example3: `public class Person
{
    public string Name;
    public int Age;
    
    public void Birthday()
    {
        Age++;  // Инкрементирај воздрас за 1
        Console.WriteLine(Name + " is now " + Age + " years old!");
    }
}

        // Креирање на објект person
Person person = new Person();
person.Name = "Charlie";
person.Age = 25;

Console.WriteLine("Initial age: " + person.Age);

// Има 3 родендени
person.Birthday();
person.Birthday();
person.Birthday();

Console.WriteLine("Final age: " + person.Age);`
        },

        currentStep: 0,

        convertCode: function(id) {
            const toggle = document.getElementById(id + "Toggle");
            const isComplete = toggle ? toggle.checked : false;
            const codeBlock = document.getElementById(id + "Code");
            const resultBox = document.getElementById(id + "Result");

            if (codeBlock && toggle) {
                codeBlock.style.transition = 'opacity 0.3s ease';
                codeBlock.style.opacity = '0.5';
                setTimeout(() => {
                    codeBlock.textContent = isComplete ? this.completeExamples[id] : this.simpleExamples[id];
                    codeBlock.style.opacity = '1';

                    if (resultBox && id === 'example1') {
                        resultBox.innerHTML = isComplete ? 
                            '<strong>Output:</strong><br>Hi, I\'m Alice, studying Computer Science<br>Hi, I\'m Bob, studying Mathematics<br>Hi, I\'m Charlie, studying Biology<br><br><em>Deep Insight:</em> We have ONE Student class, but THREE separate objects in memory. Each object has its own space for Name, Age, and Major. When <code>student1.Introduce()</code> runs, it uses <code>student1</code>\'s data, not <code>student2</code>\'s or <code>student3</code>\'s!' :
                            '<strong>Code Structure:</strong><br>1. One Student class definition<br>2. Three separate student objects created<br>3. Each object gets its own unique data<br><br><em>Toggle to see full output!</em>';
                    } else if (resultBox && id === 'example2') {
                        resultBox.innerHTML = isComplete ?
                            '<strong>Output:</strong><br>=== Sales Transactions ===<br>Sold 3 of Dell XPS 13 for $2999.97<br>Sold 2 of iPhone 15 for $1599.98<br>Not enough Dell XPS 13 in stock!<br><br>=== Remaining Stock ===<br>Dell XPS 13: 7 left<br>iPhone 15: 3 left<br><br><em>Key Insight:</em> Each product object MAINTAINS ITS OWN STOCK. When we sell laptops, only the <code>laptop</code> object\'s Stock changes. The <code>phone</code> object\'s Stock stays separate. This is why objects are perfect for real systems!' :
                            '<strong>Code Structure:</strong><br>1. Product class with Sell() method<br>2. Two separate product objects<br>3. Each manages its own stock independently<br><br><em>Toggle to see the sales simulation!</em>';
                    }
                }, 300);
            }
        },

        updateWalkthrough: function(step) {
            const walkthroughCodeBase = document.getElementById('walkthroughCodeBase');
            const walkthroughVariables = document.getElementById('walkthroughVariables');
            const walkthroughExplanation = document.getElementById('walkthroughExplanation');
            const nextStepBtn = document.getElementById('nextStepBtn');

            if (!walkthroughCodeBase || !walkthroughVariables || !walkthroughExplanation) return;

            const data = this.objectSteps[step];
            
            walkthroughCodeBase.textContent = data.code;
            walkthroughVariables.textContent = data.vars;
            walkthroughExplanation.innerHTML = `<em>Step ${step + 1}:</em> ${data.exp}`;
            
            if (step === this.objectSteps.length - 1 && nextStepBtn) {
                walkthroughExplanation.innerHTML += '<br><strong>Complete! Two independent objects created from one class.</strong>';
                nextStepBtn.disabled = true;
            }
        },

        nextStep: function() {
            if (this.currentStep < this.objectSteps.length) {
                this.updateWalkthrough(this.currentStep);
                this.currentStep++;
            }
        },

        checkAnswer: function(quizNum, answer) {
            const resultElement = document.getElementById('quiz' + quizNum + 'Result');
            let isCorrect = false;
            let explanation = '';

            if (quizNum === 1) {
                if (answer === 'B') {
                    isCorrect = true;
                    explanation = '<span class="correct-text">Correct!</span> car1 and car2 are SEPARATE objects. Setting car1.Color only affects car1. car2.Color remains empty until we set it.';
                } else {
                    explanation = '<span class="error-text">Incorrect.</span> Remember: Each object has its own data. Changing car1 does NOT affect car2. They are independent.';
                }
            } else if (quizNum === 2) {
                if (answer === 'B') {
                    isCorrect = true;
                    explanation = '<span class="correct-text">Correct!</span> The class code is loaded ONCE into memory and shared by ALL objects. Each object gets its own data space, but they all use the same class code.';
                } else {
                    explanation = '<span class="error-text">Incorrect.</span> Class code exists only ONCE in memory (in the Class Area). Objects share this code but have separate data spaces.';
                }
            }

            resultElement.innerHTML = explanation;
            resultElement.className = 'quiz-result ' + (isCorrect ? 'correct' : 'incorrect');
        },

        initWalkthrough: function() {
            const nextStepBtn = document.getElementById('nextStepBtn');
            if (nextStepBtn) {
                this.currentStep = 0;

                const newButton = nextStepBtn.cloneNode(true);
                nextStepBtn.parentNode.replaceChild(newButton, nextStepBtn);

                newButton.addEventListener('click', () => this.nextStep());
                newButton.disabled = false;

                this.updateWalkthrough(0);
                this.currentStep = 1;
            }
        },

        initCodeExamples: function() {
            const toggles = document.querySelectorAll('.form-check-input[type="checkbox"]');
            toggles.forEach(toggle => {
                const id = toggle.id.replace('Toggle', '');
                if (id && this.simpleExamples[id]) {
                    this.convertCode(id);
                    toggle.addEventListener('change', () => this.convertCode(id));
                }
            });
        },

        initQuiz: function() {
        },

        init: function() {
            console.log('Initializing OOP Objects page');
            this.initCodeExamples();
            this.initWalkthrough();
            this.initQuiz();
            
            if (typeof hljs !== 'undefined') {
                hljs.highlightAll();
            }
        }
    };

    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', () => {
            window.oopObjects.init();
        });
    } else {
        window.oopObjects.init();
    }
</script>
</body>