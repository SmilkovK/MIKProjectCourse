@{
    ViewData["Title"] = "OOP - Комплетен преглед на поглавјето";
}

<div class="container">
    <h1 class="mb-4">Комплетен преглед на објектно-ориентирано програмирање (OOP)</h1>
    <p class="lead">Го заврши целото поглавје за OOP! Ајде да ги повториме сите концепти и да го провериме твоето знаење со 25 прашања.</p>

    <div class="summary-table">
        <h2>Преглед на сите OOP концепти</h2>
        <div class="table-responsive">
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Концепт</th>
                        <th>Главна идеја</th>
                        <th>Пример од реалниот свет</th>
                        <th>Клучни зборови</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Класи</strong></td>
                        <td>Шаблони за креирање објекти</td>
                        <td>Калап за колачиња, рецепт</td>
                        <td><code>class</code></td>
                    </tr>
                    <tr>
                        <td><strong>Објекти</strong></td>
                        <td>Реални инстанци создадени од класи</td>
                        <td>Испечено колаче, готова торта</td>
                        <td><code>new</code></td>
                    </tr>
                    <tr>
                        <td><strong>Конструктори</strong></td>
                        <td>Специјални методи за иницијализација на објекти</td>
                        <td>Поставување темели на зграда</td>
                        <td><code>ClassName()</code></td>
                    </tr>
                    <tr>
                        <td><strong>Наследување</strong></td>
                        <td>Дете-класи добиваат својства/методи од родител</td>
                        <td>Семејно стебло, паметен телефон наследува од обичен</td>
                        <td><code>: ParentClass</code></td>
                    </tr>
                    <tr>
                        <td><strong>Енкапсулација</strong></td>
                        <td>Сокривање податоци и контрола на пристап</td>
                        <td>Сеф во банка, дневник со катанец</td>
                        <td><code>private</code>, <code>public</code>, <code>protected</code></td>
                    </tr>
                    <tr>
                        <td><strong>Полиморфизам</strong></td>
                        <td>Исто име, различна имплементација</td>
                        <td>Копче за вклучување, зборот „банка“</td>
                        <td><code>virtual</code>, <code>override</code>, <code>overload</code></td>
                    </tr>
                    <tr>
                        <td><strong>Апстракција</strong></td>
                        <td>Сокривање сложеност, прикажување суштина</td>
                        <td>Табла во автомобил, ТВ далечински</td>
                        <td><code>abstract</code></td>
                    </tr>
                    <tr>
                        <td><strong>Интерфејси</strong></td>
                        <td>Договори што класите мора да ги имплементираат</td>
                        <td>USB стандард, опис на работно место</td>
                        <td><code>interface</code>, <code>implement</code></td>
                    </tr>
                    <tr>
                        <td><strong>Static / Readonly / Const</strong></td>
                        <td>Различни начини за чување и заштита на податоци</td>
                        <td>Табла во компанија, извод од родени, брзина на светлината</td>
                        <td><code>static</code>, <code>readonly</code>, <code>const</code></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="detailed-summary">
        <h2>Детален преглед на концептите</h2>

        <div class="concept-card">
            <h3>1. Класи и објекти</h3>
            <div class="row">
                <div class="col-md-6">
                    <h4>Класи (шаблон)</h4>
                    <pre><code class="language-csharp">public class Car
{
    public string Brand;
    public void Drive() { }
}</code></pre>
                </div>
                <div class="col-md-6">
                    <h4>Објекти (инстанца)</h4>
                    <pre><code class="language-csharp">Car myCar = new Car();
myCar.Brand = "Toyota";
myCar.Drive();</code></pre>
                </div>
            </div>
        </div>

        <div class="concept-card">
            <h3>2. Конструктори</h3>
            <pre><code class="language-csharp">public class Student
{
    public string Name;
    public int Age;

    public Student(string name, int age)
    {
        Name = name;
        Age = age;
    }
}

Student s = new Student("Alice", 20);</code></pre>
        </div>

        <div class="concept-card">
            <h3>3. Хиерархија на наследување</h3>
            <pre><code class="language-csharp">public class Animal { }
public class Dog : Animal { }
public class Cat : Animal { }

Animal myPet = new Dog();</code></pre>
        </div>

        <div class="concept-card">
            <h3>4. Нивоа на енкапсулација</h3>
            <div class="row">
                <div class="col-md-4">
                    <h5>Public</h5>
                    <pre><code class="language-csharp">public int Score;</code></pre>
                    <p>Достапно за сите</p>
                </div>
                <div class="col-md-4">
                    <h5>Private</h5>
                    <pre><code class="language-csharp">private string password;</code></pre>
                    <p>Достапно само во класата</p>
                </div>
                <div class="col-md-4">
                    <h5>Protected</h5>
                    <pre><code class="language-csharp">protected int health;</code></pre>
                    <p>Класа + наследници</p>
                </div>
            </div>
        </div>

        <div class="concept-card">
            <h3>5. Видови полиморфизам</h3>
            <div class="row">
                <div class="col-md-6">
                    <h4>Overloading (во време на компајлирање)</h4>
                    <pre><code class="language-csharp">public int Add(int a, int b)
public double Add(double a, double b)
public int Add(int a, int b, int c)</code></pre>
                </div>
                <div class="col-md-6">
                    <h4>Overriding (во време на извршување)</h4>
                    <pre><code class="language-csharp">public class Animal {
    public virtual void MakeSound() { }
}
public class Dog : Animal {
    public override void MakeSound() {
        Console.WriteLine("Woof!");
    }
}</code></pre>
                </div>
            </div>
        </div>

        <div class="concept-card">
            <h3>6. Апстракција наспроти интерфејси</h3>
            <div class="row">
                <div class="col-md-6">
                    <h4>Апстрактни класи</h4>
                    <pre><code class="language-csharp">public abstract class Shape
{
    public abstract double Area();
    public void Display() { }
}</code></pre>
                    <p>Може да има делумна имплементација</p>
                </div>
                <div class="col-md-6">
                    <h4>Интерфејси</h4>
                    <pre><code class="language-csharp">public interface IDrivable
{
    void Drive();
    void Stop();
}</code></pre>
                    <p>Чист договор, без имплементација</p>
                </div>
            </div>
        </div>

        <div class="concept-card">
            <h3>7. Static, Readonly, Const</h3>
            <div class="row">
                <div class="col-md-4">
                    <h5>Static</h5>
                    <pre><code class="language-csharp">public static int count;</code></pre>
                    <p>Споделено од сите објекти</p>
                </div>
                <div class="col-md-4">
                    <h5>Readonly</h5>
                    <pre><code class="language-csharp">public readonly string id;</code></pre>
                    <p>Се поставува еднаш, не се менува</p>
                </div>
                <div class="col-md-4">
                    <h5>Const</h5>
                    <pre><code class="language-csharp">public const double PI = 3.14;</code></pre>
                    <p>Никогаш не се менува, познато при компајлирање</p>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-section">
        <h2>25 прашања за проверка на знаење по OOP</h2>
        <p>Провери го твоето разбирање на сите OOP концепти. Избери го најточниот одговор за секое прашање.</p>

        <div class="quiz-container" id="quizContainer">
        </div>

        <div class="quiz-results" id="quizResults" style="display: none;">
            <h3>Твои резултати</h3>
            <div class="progress" style="height: 30px;">
                <div id="scoreBar" class="progress-bar" role="progressbar" style="width: 0%">0%</div>
            </div>
            <p id="scoreText" class="mt-3"></p>
            <button class="btn btn-secondary mt-2" id="restartQuizBtn">Рестартирај квиз</button>
        </div>

        <button class="btn btn-primary btn-lg mt-4" id="startQuizBtn">Започни квиз</button>
    </div>

    <div class="navigation-buttons">
        <a href="@Url.Action("StaticReadonlyConst", "OOP")" class="btn btn-outline-primary">← Static, Readonly, Const</a>
        <a href="@Url.Action("Index", "Database")" class="btn btn-primary">Следно поглавје: Бази на податоци →</a>
    </div>
</div>


<style>
    .container {
        max-width: 1200px;
        padding: 30px;
        background-color: var(--bs-body-bg);
    }

    h1, h2, h3, h4 {
        color: var(--bs-heading-color);
        margin-bottom: 20px;
    }

    h1 {
        border-bottom: 3px solid var(--bs-primary);
        padding-bottom: 15px;
    }

    .summary-table {
        margin: 40px 0;
        padding: 25px;
        background-color: var(--summary-table-bg, rgba(13, 110, 253, 0.05));
        border-radius: 10px;
        border: 1px solid var(--bs-border-color);
    }

    .detailed-summary {
        margin: 40px 0;
    }

    .concept-card {
        background-color: var(--concept-card-bg, white);
        border: 1px solid var(--bs-border-color);
        border-radius: 8px;
        padding: 25px;
        margin-bottom: 25px;
        box-shadow: 0 2px 4px var(--shadow-color, rgba(0,0,0,0.1));
    }

    .concept-card h3 {
        color: var(--bs-primary);
        border-bottom: 2px solid var(--bs-primary);
        padding-bottom: 10px;
    }

    .concept-card pre {
        background-color: var(--code-bg);
        padding: 15px;
        border-radius: 5px;
        margin: 15px 0;
        border: 1px solid var(--bs-border-color);
    }

    .concept-card p {
        color: var(--bs-body-color);
    }

    .quiz-section {
        margin: 50px 0;
        padding: 30px;
        background-color: var(--quiz-section-bg, rgba(111, 66, 193, 0.05));
        border-radius: 10px;
        border: 1px solid var(--bs-border-color);
    }

    .quiz-container {
        margin: 30px 0;
    }

    .quiz-question {
        background-color: var(--quiz-question-bg, white);
        border: 1px solid var(--bs-border-color);
        border-radius: 8px;
        padding: 20px;
        margin-bottom: 20px;
        display: none;
    }

    .quiz-question.active {
        display: block;
        animation: fadeIn 0.5s;
    }

    .quiz-options {
        margin: 20px 0;
    }

    .quiz-option {
        display: block;
        padding: 12px 15px;
        margin: 8px 0;
        border: 2px solid var(--bs-border-color);
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.3s;
        color: var(--bs-body-color);
        background-color: var(--quiz-option-bg, transparent);
    }

    .quiz-option:hover {
        background-color: var(--quiz-option-hover, rgba(13, 110, 253, 0.1));
        border-color: var(--bs-primary);
    }

    .quiz-option.selected {
        background-color: var(--quiz-option-selected, rgba(13, 110, 253, 0.2));
        border-color: var(--bs-primary);
    }

    .quiz-option.correct {
        background-color: var(--quiz-option-correct, rgba(40, 167, 69, 0.2));
        border-color: var(--bs-success);
    }

    .quiz-option.incorrect {
        background-color: var(--quiz-option-incorrect, rgba(220, 53, 69, 0.2));
        border-color: var(--bs-danger);
    }

    .quiz-results {
        background-color: var(--quiz-results-bg, white);
        padding: 25px;
        border-radius: 8px;
        border: 1px solid var(--bs-border-color);
        margin-top: 30px;
    }

    .navigation-buttons {
        display: flex;
        justify-content: space-between;
        margin-top: 40px;
        padding-top: 20px;
        border-top: 2px solid var(--bs-border-color);
    }

    .btn {
        padding: 12px 25px;
        border-radius: 6px;
        font-weight: 500;
    }

    .btn-primary {
        background-color: var(--bs-primary);
        border-color: var(--bs-primary);
    }

    .btn-outline-primary {
        color: var(--bs-primary);
        border-color: var(--bs-primary);
    }

    .btn-outline-primary:hover {
        background-color: var(--bs-primary);
        color: white;
    }

    .progress {
        background-color: var(--progress-bg, #e9ecef);
    }

    .progress-bar {
        background-color: var(--bs-primary);
    }

    .alert-info {
        background-color: var(--alert-info-bg, rgba(13, 202, 240, 0.1));
        border-color: var(--alert-info-border, rgba(13, 202, 240, 0.3));
        color: var(--alert-info-color, var(--bs-info));
    }

    @@keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }

    [data-bs-theme="dark"] {
        --summary-table-bg: rgba(13, 110, 253, 0.1);
        --concept-card-bg: rgba(255, 255, 255, 0.05);
        --shadow-color: rgba(0, 0, 0, 0.3);
        --quiz-section-bg: rgba(111, 66, 193, 0.1);
        --quiz-question-bg: rgba(255, 255, 255, 0.05);
        --quiz-results-bg: rgba(255, 255, 255, 0.05);
        --quiz-option-bg: rgba(255, 255, 255, 0.03);
        --quiz-option-hover: rgba(110, 168, 254, 0.2);
        --quiz-option-selected: rgba(110, 168, 254, 0.3);
        --quiz-option-correct: rgba(40, 167, 69, 0.3);
        --quiz-option-incorrect: rgba(220, 53, 69, 0.3);
        --progress-bg: rgba(255, 255, 255, 0.1);
        --alert-info-bg: rgba(13, 202, 240, 0.2);
        --alert-info-border: rgba(13, 202, 240, 0.4);
        --alert-info-color: #6ea8fe;
    }

    [data-bs-theme="light"] {
        --summary-table-bg: rgba(13, 110, 253, 0.05);
        --concept-card-bg: white;
        --shadow-color: rgba(0, 0, 0, 0.1);
        --quiz-section-bg: rgba(111, 66, 193, 0.05);
        --quiz-question-bg: white;
        --quiz-results-bg: white;
        --quiz-option-bg: transparent;
        --quiz-option-hover: rgba(13, 110, 253, 0.1);
        --quiz-option-selected: rgba(13, 110, 253, 0.2);
        --quiz-option-correct: rgba(40, 167, 69, 0.2);
        --quiz-option-incorrect: rgba(220, 53, 69, 0.2);
        --progress-bg: #e9ecef;
        --alert-info-bg: rgba(13, 202, 240, 0.1);
        --alert-info-border: rgba(13, 202, 240, 0.3);
        --alert-info-color: #0dcaf0;
    }

    [data-bs-theme="dark"] .language-csharp {
        background-color: #1e1e1e !important;
        color: #d4d4d4 !important;
    }

    [data-bs-theme="light"] .language-csharp {
        background-color: #f6f8fa !important;
        color: #24292e !important;
    }

    .table {
        --bs-table-color: var(--bs-body-color);
        --bs-table-bg: transparent;
        --bs-table-border-color: var(--bs-border-color);
    }

    .table-striped>tbody>tr:nth-of-type(odd)>* {
        --bs-table-accent-bg: var(--table-striped-bg);
    }

    [data-bs-theme="dark"] .table-striped>tbody>tr:nth-of-type(odd)>* {
        --table-striped-bg: rgba(255, 255, 255, 0.05);
    }

    [data-bs-theme="light"] .table-striped>tbody>tr:nth-of-type(odd)>* {
        --table-striped-bg: rgba(0, 0, 0, 0.02);
    }
</style>

<script>
    const quizQuestions = [
        {
            question: "1. Што е класа во OOP?",
            options: [
                "A) Вистински објект што можеш да го користиш",
                "B) План (шаблон) за креирање објекти",
                "C) Метод што ги иницијализира објектите",
                "D) Променлива што чува податоци"
            ],
            correct: 1,
            explanation: "Класата е план или шаблон за креирање објекти. Таа дефинира кои својства и методи ќе ги имаат објектите."
        },
        {
            question: "2. Како се креира објект од класа?",
            options: [
                "A) ClassName object;",
                "B) new ClassName();",
                "C) ClassName.createObject();",
                "D) object = ClassName;"
            ],
            correct: 1,
            explanation: "Се користи клучниот збор 'new' проследен со името на класата и загради: new ClassName();"
        },
        {
            question: "3. Што е конструктор?",
            options: [
                "A) Метод што ги уништува објектите",
                "B) Специјален метод што ги иницијализира објектите",
                "C) Метод што го имаат само static класи",
                "D) Друго име за класа"
            ],
            correct: 1,
            explanation: "Конструкторот е специјален метод што автоматски се повикува при креирање објект и служи за иницијализација на својствата."
        },
        {
            question: "4. Ако Car наследува од Vehicle, каква е оваа врска?",
            options: [
                "A) Car ИМА Vehicle",
                "B) Car Е Vehicle",
                "C) Car КОРИСТИ Vehicle",
                "D) Car КРЕИРА Vehicle"
            ],
            correct: 1,
            explanation: "Наследувањето создава 'is-a' релација. Ако Car наследува од Vehicle, тогаш Car Е Vehicle."
        },
        {
            question: "5. Кој access modifier дозволува пристап само во самата класа?",
            options: [
                "A) public",
                "B) protected",
                "C) private",
                "D) internal"
            ],
            correct: 2,
            explanation: "private дозволува пристап само во рамките на самата класа."
        },
        {
            question: "6. Што е енкапсулација?",
            options: [
                "A) Криење на деталите за имплементација",
                "B) Креирање повеќе методи со исто име",
                "C) Наследување од родителска класа",
                "D) Креирање апстрактни класи"
            ],
            correct: 0,
            explanation: "Енкапсулацијата значи групирање на податоци и методи заедно и ограничување на пристапот до внатрешните детали."
        },
        {
            question: "7. Кој клучен збор дозволува метод да биде override-нат?",
            options: [
                "A) sealed",
                "B) override",
                "C) virtual",
                "D) abstract"
            ],
            correct: 2,
            explanation: "Клучниот збор 'virtual' во родителската класа дозволува методот да биде override-нат со 'override' во наследена класа."
        },
        {
            question: "8. Што е method overloading?",
            options: [
                "A) Ист метод, исти параметри, различни класи",
                "B) Ист метод, различни параметри, иста класа",
                "C) Различно име, исти параметри",
                "D) Наследување методи"
            ],
            correct: 1,
            explanation: "Method overloading значи повеќе методи со исто име, но различни параметри во иста класа."
        },
        {
            question: "9. Што е апстракција?",
            options: [
                "A) Прикажување на сите детали",
                "B) Криење на комплексноста и прикажување само на суштинското",
                "C) Правење сè public",
                "D) Креирање повеќе објекти"
            ],
            correct: 1,
            explanation: "Апстракцијата крие сложени детали и го прикажува само најважното за корисникот."
        },
        {
            question: "10. Која е главната разлика помеѓу abstract класи и интерфејси?",
            options: [
                "A) Abstract класи не можат да имаат методи",
                "B) Интерфејсите секогаш имаат имплементација",
                "C) Abstract класи можат да имаат делумна имплементација",
                "D) Интерфејсите користат abstract keyword"
            ],
            correct: 2,
            explanation: "Abstract класи можат да имаат и имплементирани и неимплементирани методи, додека интерфејсите традиционално немаат имплементација."
        },
        {
            question: "11. Што значи клучниот збор 'static'?",
            options: [
                "A) Вредноста никогаш не се менува",
                "B) Припаѓа на класата, не на објектите",
                "C) Се користи само во конструктори",
                "D) Не може да се наследи"
            ],
            correct: 1,
            explanation: "Static членови припаѓаат на класата, а не на поединечни објекти."
        },
        {
            question: "12. Која е разликата помеѓу 'readonly' и 'const'?",
            options: [
                "A) readonly може да се менува, const не",
                "B) const се поставува на runtime",
                "C) readonly може во конструктор, const само при декларација",
                "D) Нема разлика"
            ],
            correct: 2,
            explanation: "readonly може да се постави во конструктор, додека const мора да биде поставен при декларација."
        },
        {
            question: "13. Ако Shape е abstract со Draw(), што мора да направи Circle?",
            options: [
                "A) Ништо",
                "B) Да имплементира Draw()",
                "C) Да го направи private",
                "D) Да креира нов abstract метод"
            ],
            correct: 1,
            explanation: "Наследената класа мора да ги имплементира сите abstract методи."
        },
        {
            question: "14. Што е полиморфизам?",
            options: [
                "A) Многу класи со исто име",
                "B) Еден интерфејс, повеќе имплементации",
                "C) Криење податоци",
                "D) Креирање планови"
            ],
            correct: 1,
            explanation: "Полиморфизам значи 'многу форми' – ист интерфејс, различно однесување."
        },
        {
            question: "15. Кој од овие НЕ е валиден конструктор?",
            options: [
                "A) public Car() { }",
                "B) public Car(string brand) { }",
                "C) public void Car() { }",
                "D) public Car(string brand, int year) { }"
            ],
            correct: 2,
            explanation: "Конструкторите немаат return тип. 'void' го прави обичен метод."
        },
        {
            question: "16. Што се случува ако се обидеш да смениш const вредност?",
            options: [
                "A) Runtime грешка",
                "B) Compile-time грешка",
                "C) Успешно се менува",
                "D) Предупредување"
            ],
            correct: 1,
            explanation: "Менување на const вредност предизвикува compile-time грешка."
        },
        {
            question: "17. Што дозволува 'protected'?",
            options: [
                "A) Пристап од секаде",
                "B) Само во класата",
                "C) Во класата и наследените класи",
                "D) Само во assembly"
            ],
            correct: 2,
            explanation: "protected дозволува пристап во класата и нејзините наследници."
        },
        {
            question: "18. Кој е пример за method overriding?",
            options: [
                "A) Animal.MakeSound() и Dog.MakeSound()",
                "B) Calculator.Add(int, int) и Add(double, double)",
                "C) Printer.Print() и Print(int)",
                "D) Car.Start() и Engine.Start()"
            ],
            correct: 0,
            explanation: "Overriding е кога наследената класа ја заменува имплементацијата на метод од родителската."
        },
        {
            question: "19. Која е целта на интерфејсите?",
            options: [
                "A) Целосна имплементација",
                "B) Дефинирање договор што мора да се имплементира",
                "C) Криење методи",
                "D) Замена на класи"
            ],
            correct: 1,
            explanation: "Интерфејсите дефинираат договор што класите мора да го исполнат."
        },
        {
            question: "20. Колку родителски класи може да наследи една класа во C#?",
            options: [
                "A) Неограничено",
                "B) Една",
                "C) Две",
                "D) Три"
            ],
            correct: 1,
            explanation: "C# поддржува само едно наследување."
        },
        {
            question: "21. За што служи клучниот збор 'base'?",
            options: [
                "A) Повик на родителски методи",
                "B) Креирање објекти",
                "C) Правење static",
                "D) Дефинирање константи"
            ],
            correct: 0,
            explanation: "base се користи за пристап до членови од родителската класа."
        },
        {
            question: "22. Што е точно за static методите?",
            options: [
                "A) Пристапуваат до instance променливи",
                "B) Припаѓаат на објекти",
                "C) Се повикуваат без објект",
                "D) Секогаш се private"
            ],
            correct: 2,
            explanation: "Static методите се повикуваат директно преку класата."
        },
        {
            question: "23. Која е разликата помеѓу value и reference типови?",
            options: [
                "A) Value чуваат вредност, reference чуваат адреса",
                "B) Value се поголеми",
                "C) Reference не можат да бидат null",
                "D) Нема разлика"
            ],
            correct: 0,
            explanation: "Value типови ја чуваат вредноста, reference типови чуваат адреса во меморија."
        },
        {
            question: "24. Што прави 'sealed'?",
            options: [
                "A) Ја прави класата abstract",
                "B) Спречува наследување",
                "C) Ги прави методите static",
                "D) Ја крие класата"
            ],
            correct: 1,
            explanation: "sealed спречува класата да биде наследена."
        },
        {
            question: "25. Зошто да се користат properties наместо public полиња?",
            options: [
                "A) Побързи се",
                "B) Овозможуваат контрола и валидација",
                "C) Трошат помалку меморија",
                "D) Се задолжителни за наследување"
            ],
            correct: 1,
            explanation: "Properties овозможуваат валидација и контрола при поставување и читање вредности."
        }
    ];

    let currentQuestionIndex = 0;
    let score = 0;
    let userAnswers = [];

    document.addEventListener('DOMContentLoaded', function() {
        if (typeof hljs !== 'undefined') {
            hljs.highlightAll();
        }

        document.getElementById('startQuizBtn').addEventListener('click', startQuiz);
        document.getElementById('restartQuizBtn').addEventListener('click', resetQuiz);
    });

    function startQuiz() {
        document.getElementById('startQuizBtn').style.display = 'none';
        document.getElementById('quizContainer').innerHTML = '';
        document.getElementById('quizResults').style.display = 'none';
        
        currentQuestionIndex = 0;
        score = 0;
        userAnswers = [];
        
        loadQuestion(currentQuestionIndex);
    }

    function loadQuestion(index) {
        const container = document.getElementById('quizContainer');
        const question = quizQuestions[index];
        
        let html = `
            <div class="quiz-question active">
                <h4>${question.question}</h4>
                <div class="quiz-options">
        `;
        
        question.options.forEach((option, optionIndex) => {
            html += `
                <div class="quiz-option" onclick="selectAnswer(${optionIndex})" id="option${optionIndex}">
                    ${option}
                </div>
            `;
        });
        
        html += `
                </div>
                <div id="explanation${index}" class="mt-3" style="display: none;">
                    <div class="alert alert-info">
                        <strong>Explanation:</strong> ${question.explanation}
                    </div>
                </div>
                <div class="mt-3">
                    <button class="btn btn-primary" onclick="handleNext()" id="nextBtn${index}" disabled>
                        ${index === quizQuestions.length - 1 ? 'See Results' : 'Next Question'}
                    </button>
                    <span class="ms-3">Question ${index + 1} of ${quizQuestions.length}</span>
                </div>
            </div>
        `;
        
        container.innerHTML = html;
    }

    function selectAnswer(index) {
        for (let i = 0; i < 4; i++) {
            const option = document.getElementById(`option${i}`);
            if (option) {
                option.classList.remove('selected');
            }
        }
        
        const option = document.getElementById(`option${index}`);
        option.classList.add('selected');
        
        document.getElementById(`nextBtn${currentQuestionIndex}`).disabled = false;
        
        userAnswers[currentQuestionIndex] = index;
    }

    function handleNext() {
        const question = quizQuestions[currentQuestionIndex];
        const userAnswer = userAnswers[currentQuestionIndex];
        
        document.getElementById(`explanation${currentQuestionIndex}`).style.display = 'block';
        
        for (let i = 0; i < 4; i++) {
            const option = document.getElementById(`option${i}`);
            if (option) {
                option.classList.remove('selected');
                if (i === question.correct) {
                    option.classList.add('correct');
                } else if (i === userAnswer && i !== question.correct) {
                    option.classList.add('incorrect');
                }
                option.style.pointerEvents = 'none';
            }
        }
        
        if (userAnswer === question.correct) {
            score++;
        }
        
        document.getElementById(`nextBtn${currentQuestionIndex}`).disabled = true;
        
        setTimeout(() => {
            currentQuestionIndex++;
            
            if (currentQuestionIndex < quizQuestions.length) {
                loadQuestion(currentQuestionIndex);
            } else {
                showResults();
            }
        }, 2000);
    }

    function showResults() {
        document.getElementById('quizContainer').innerHTML = '';
        document.getElementById('quizResults').style.display = 'block';
        
        const percentage = Math.round((score / quizQuestions.length) * 100);
        const scoreBar = document.getElementById('scoreBar');
        scoreBar.style.width = `${percentage}%`;
        scoreBar.textContent = `${percentage}%`;
        
        let message = '';
        if (percentage >= 90) {
            message = '🎉 Excellent! You\'re an OOP master!';
            scoreBar.className = 'progress-bar bg-success';
        } else if (percentage >= 70) {
            message = '👍 Great job! You have a solid understanding of OOP.';
            scoreBar.className = 'progress-bar bg-info';
        } else if (percentage >= 50) {
            message = '📚 Good effort! Review the concepts and try again.';
            scoreBar.className = 'progress-bar bg-warning';
        } else {
            message = '📖 Keep learning! Review the chapter and try the quiz again.';
            scoreBar.className = 'progress-bar bg-danger';
        }
        
        document.getElementById('scoreText').innerHTML = `
            <h4>${message}</h4>
            <p>You scored ${score} out of ${quizQuestions.length} questions correctly.</p>
            <p>Percentage: ${percentage}%</p>
        `;
    }

    function resetQuiz() {
        document.getElementById('quizResults').style.display = 'none';
        document.getElementById('startQuizBtn').style.display = 'inline-block';
    }
</script>