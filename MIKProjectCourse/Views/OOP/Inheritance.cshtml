@{
    ViewData["Title"] = "OOP - Наследување";
}

<body data-topic="inheritance">
    <div class="container">
        <h1 class="mb-4 text-center">Наследување: Градење врз веќе постоечко</h1>

        <p><strong>Наследувањето</strong> е како да ги добивате карактеристиките од вашите родители. Во програмирањето, тоа ѝ дозволува на една класа да <strong>наследи</strong> својства и методи од друга класа, за да не го пишувате истиот код повторно и повторно.</p>

        <p>Наследување гледате постојано во реалниот живот:</p>
        <ul>
            <li><strong>Паметен телефон</strong> наследува функции од <strong>обичен телефон</strong> (јавување), но додава нови (фотографирање)</li>
            <li><strong>Луксузен автомобил</strong> наследува од <strong>обичен автомобил</strong> (тркала, мотор), но додава кожни седишта</li>
            <li><strong>Студент</strong> е <strong>личност</strong> со дополнителни карактеристики (студира, има насока)</li>
            <li><strong>Stories</strong> на Instagram наследуваат од <strong>Posts</strong>, но исчезнуваат по 24 часа</li>
        </ul>

        <h2 class="text-center">Што е наследување?</h2>
        <p>Наследувањето создава <strong>врска родител-дете</strong> помеѓу класите:</p>

        <div class="code-container">
            <div class="code-header">Семејно стебло на класи</div>
            <div class="code-content">
<pre>
РОДИТЕЛСКА КЛАСА (Base)      ДЕТЕ КЛАСА (Derived)
────────────────────────────────────────────────
    Person                        Student
      │                              │
      ├─ Name (наследено) ───────────┘
      ├─ Age (наследено) ─────────────┘
      └─ Eat() (наследено) ───────────┘
                                   │
                                   ├─ School (ново)
                                   └─ Study() (ново)

ЕДНА родителска класа може да има     МНОГУ дете-класи
</pre>
            </div>
        </div>

        <p><strong>Клучна идеја:</strong> Дете-класите добиваат сѐ од родителската класа бесплатно, а потоа додаваат свои посебни карактеристики.</p>

        <h2 class="text-center">Операторот две точки (:)</h2>
        <p>Во C#, користиме две точки <code>:</code> за да покажеме наследување. Тоа значи „е“:</p>

        <div class="code-container">
            <div class="code-header">Синтакса за наследување</div>
            <div class="code-content">
<pre>
// Родителска класа
public class Animal
{
    public string Name;
    public void Eat() { Console.WriteLine("Јадење..."); }
}

// Дете-класа
// „Куче Е Животно“
public class Dog : Animal
{
    public void Bark() { Console.WriteLine("Ав!"); }
}

// Друга дете-класа
// „Мачка Е Животно“
public class Cat : Animal
{
    public void Meow() { Console.WriteLine("Мјау!"); }
}
</pre>
            </div>
        </div>

        <h2 class="text-center">Пример 1: Класичен пример Person → Student</h2>

        <div class="code-container">
            <div class="form-check form-switch mb-2">
                <input class="form-check-input" type="checkbox" id="example1Toggle" onchange="oopInheritance.convertCode('example1')">
                <label class="form-check-label" for="example1Toggle">Прикажи целосен пример со излез</label>
            </div>
            <div class="code-content">
<pre class="codeBlock" id="example1Code">
public class Person
{
    public string Name;
    public int Age;

    public void Introduce()
    {
        Console.WriteLine("Здраво, јас сум " + Name + " и имам " + Age + " години.");
    }

    public void Eat()
    {
        Console.WriteLine(Name + " јаде ручек.");
    }
}

public class Student : Person
{
    public string School;
    public string Major;

    public void Study()
    {
        Console.WriteLine(Name + " студира " + Major + " во " + School + ".");
    }
}

public class Teacher : Person
{
    public string Subject;
    public decimal Salary;

    public void Teach()
    {
        Console.WriteLine(Name + " предава " + Subject + ".");
    }
}
</pre>
            </div>
            <div class="result-box" id="example1Result">
                <strong>Излез:</strong><br>
                Здраво, јас сум Alice и имам 20 години.<br>
                Alice студира CS во MIT.<br>
                Здраво, јас сум Dr. Smith и имам 45 години.<br>
                Dr. Smith предава Math.<br><br>
                <em>Моќта на наследувањето:</em> Student и Teacher ги добија Name, Age и Introduce() од Person без повторно пишување код.
            </div>
        </div>

        <h2 class="text-center">Чести грешки при наследување</h2>
        <div class="code-container">
            <div class="code-header">Грешки</div>
            <div class="code-content">
<pre>
<span style="color:red;">// ГРЕШКА: Погрешна „е“ врска</span>
public class Car : Engine  // Автомобил НЕ Е мотор

<span style="color:lightgreen;">// ТОЧНО</span>
public class Car : Vehicle // Автомобил Е возило
</pre>
            </div>
        </div>

        <h2 class="text-center">Клучни концепти</h2>
        <div class="code-container">
            <div class="code-content">
<pre>
1. „Е“ ВРСКА
   - Student Е Person
   - Car Е Vehicle

2. Повторна употреба на код
   - Заедничкиот код се пишува еднаш

3. Проширување
   - Дете-класите додаваат функционалности

4. Единечно наследување
   - Една класа има само еден родител
</pre>
            </div>
        </div>

        <h2 class="text-center">Резиме</h2>
        <ul>
            <li>Наследувањето овозможува повторна употреба на код</li>
            <li>Синтакса: <code>class Child : Parent</code></li>
            <li>Користи го тестот „Child Е Parent“</li>
            <li>Го прави кодот почист и полесен за одржување</li>
        </ul>

        <div class="navigation-buttons">
            <a href="@Url.Action("Objects", "OOP")" class="btn btn-outline-primary ajax-link">← Објекти</a>
            <a href="@Url.Action("Encapsulation", "OOP")" class="btn btn-primary ajax-link">Енкапсулација →</a>
        </div>
    </div>

<style>
    .container {
        max-width: 800px;
        padding: 20px;
        background-color: var(--bs-body-bg);
    }

    h1, h2, h3 {
        color: var(--bs-heading-color);
        margin-bottom: 15px;
    }

    h1 {
        border-bottom: 2px solid var(--bs-primary);
        padding-bottom: 10px;
    }

    p, li, code {
        color: var(--bs-body-color);
        line-height: 1.6;
    }

    .code-container {
        margin: 25px 0;
        border: 1px solid var(--bs-border-color);
        border-radius: 5px;
        overflow: hidden;
        background-color: var(--code-bg);
    }

    .code-header {
        background-color: var(--code-header-bg);
        padding: 10px 15px;
        border-bottom: 1px solid var(--bs-border-color);
        font-family: 'SFMono-Regular', Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
        font-size: 0.9rem;
        color: var(--bs-body-color);
    }

    .code-content {
        padding: 15px;
        overflow-x: auto;
    }

    pre {
        margin: 0;
        white-space: pre-wrap;
        background-color: transparent;
        font-family: 'SFMono-Regular', Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    }

    .result-box {
        padding: 10px 15px;
        background-color: rgba(0, 123, 255, 0.1);
        border-top: 1px solid var(--bs-border-color);
        font-size: 0.95rem;
    }

    .quiz-container {
        background-color: rgba(108, 117, 125, 0.1);
        border: 1px solid var(--bs-secondary);
        border-radius: 5px;
        padding: 15px;
        margin: 20px 0;
    }

    .quiz-question {
        margin-bottom: 15px;
    }

    .quiz-options {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        margin-top: 10px;
    }

    .quiz-result {
        min-height: 30px;
        padding: 5px 10px;
        border-radius: 4px;
        font-weight: 500;
    }

    .quiz-result.correct {
        background-color: rgba(40, 167, 69, 0.1);
        color: var(--bs-success);
        border: 1px solid var(--bs-success);
    }

    .quiz-result.incorrect {
        background-color: rgba(220, 53, 69, 0.1);
        color: var(--bs-danger);
        border: 1px solid var(--bs-danger);
    }

    .next-steps {
        background-color: rgba(111, 66, 193, 0.1);
        border: 1px solid var(--bs-indigo);
        border-radius: 5px;
        padding: 15px;
        margin: 20px 0;
    }

    .navigation-buttons {
        display: flex;
        justify-content: space-between;
        margin-top: 30px;
    }

    .btn {
        padding: 8px 20px;
        border-radius: 4px;
        font-weight: 500;
        text-decoration: none;
    }

    .btn-primary {
        background-color: var(--bs-primary);
        border-color: var(--bs-primary);
        color: #fff;
    }

    .btn-outline-primary {
        color: var(--bs-primary);
        border-color: var(--bs-primary);
        background-color: transparent;
    }

    .btn-outline-secondary {
        color: var(--bs-secondary);
        border-color: var(--bs-secondary);
        background-color: transparent;
    }

    .btn-sm {
        padding: 5px 10px;
        font-size: 0.875rem;
    }
</style>

<script>
    window.oopInheritance = {
        inheritanceSteps: [
            {
                code: `public class Vehicle
{
    public string Brand;
    public void Start() { Console.WriteLine("Vehicle starting..."); }
}

        // Car наследува од Vehicle
// public class Car : Vehicle
// {
//     public int Doors;
//     public void Honk() { Console.WriteLine("Beep beep!"); }
// }

// Car car = new Car();
// car.Brand = "Toyota";
// car.Doors = 4;
// car.Start();
// car.Honk();`,
                vars: `Vehicle class defined with:
- Brand property
- Start() method

No Car class yet.`,
                exp: "First, we define the parent class Vehicle. This is the blueprint for all vehicles. It has properties and methods that ALL vehicles will share."
            },
            {
                code: `public class Vehicle
{
    public string Brand;
    public void Start() { Console.WriteLine("Vehicle starting..."); }
}

        // Car наследува од Vehicle
public class Car : Vehicle
{
    public int Doors;
    public void Honk() { Console.WriteLine("Beep beep!"); }
}

// Car car = new Car();
// car.Brand = "Toyota";
// car.Doors = 4;
// car.Start();
// car.Honk();`,
                vars: `Vehicle (Parent):
- Brand
- Start()

Car (Child) INHERITS from Vehicle:
- Gets Brand (inherited)
- Gets Start() (inherited)
- Adds Doors (new)
- Adds Honk() (new)`,
                exp: "We create the Car class that INHERITS from Vehicle using the colon (:). Car automatically gets ALL properties and methods from Vehicle. It also adds its own special features (Doors and Honk())."
            },
            {
                code: `public class Vehicle
{
    public string Brand;
    public void Start() { Console.WriteLine("Vehicle starting..."); }
}

// Car наследува од Vehicle
public class Car : Vehicle
{
    public int Doors;
    public void Honk() { Console.WriteLine("Beep beep!"); }
}

Car car = new Car();
// car.Brand = "Toyota";
// car.Doors = 4;
// car.Start();
// car.Honk();`,
                vars: `Created Car object:
- Brand: (empty, inherited)
- Doors: 0 (default)
- Can call Start() (inherited)
- Can call Honk() (its own)

The Car object has 4 members total!`,
                exp: "We create a Car object. Even though we only defined Doors and Honk() in Car class, the object ALSO has Brand and Start() from Vehicle! That's inheritance - getting parent's features for free."
            },
            {
                code: `public class Vehicle
{
    public string Brand;
    public void Start() { Console.WriteLine("Vehicle starting..."); }
}

// Car наследува од Vehicle
public class Car : Vehicle
{
    public int Doors;
    public void Honk() { Console.WriteLine("Beep beep!"); }
}

Car car = new Car();
car.Brand = "Toyota";  // Setting inherited property
car.Doors = 4;         // Setting its own property
// car.Start();
// car.Honk();`,
                vars: `Car object now:
- Brand: "Toyota" (inherited from Vehicle)
- Doors: 4 (its own property)
- Start(): available (inherited)
- Honk(): available (its own)`,
                exp: "We set the car's Brand (inherited from Vehicle) to 'Toyota' and its Doors (its own property) to 4. The Car object seamlessly combines inherited and its own properties!"
            },
            {
                code: `public class Vehicle
{
    public string Brand;
    public void Start() { Console.WriteLine("Vehicle starting..."); }
}

// Car наследува од Vehicle
public class Car : Vehicle
{
    public int Doors;
    public void Honk() { Console.WriteLine("Beep beep!"); }
}

Car car = new Car();
car.Brand = "Toyota";
car.Doors = 4;
car.Start();  // Calling inherited method
car.Honk();   // Calling its own method`,
                vars: `Car object executing:
1. car.Start() → Uses Vehicle's Start() method
   Output: "Vehicle starting..."
   
2. car.Honk() → Uses Car's own Honk() method
   Output: "Beep beep!"

The Car object successfully uses BOTH inherited and its own methods!`,
                exp: "Finally, we call both methods. car.Start() uses the inherited method from Vehicle. car.Honk() uses Car's own method. This shows inheritance in action - one object with features from two classes!"
            }
        ],

        simpleExamples: {
            example1: `// Parent Class: Person (the base)
public class Person
{
    public string Name;
    public int Age;
    
    public void Introduce()
    {
        Console.WriteLine("Hi, I'm " + Name + " and I'm " + Age + " years old.");
    }
}

// Child Class: Student (наследува од Person)
public class Student : Person
{
    public string School;
    public string Major;
    
    public void Study()
    {
        Console.WriteLine(Name + " is studying " + Major + " at " + School + ".");
    }
}

// Друга Child Class: Teacher (наследува од Person)
public class Teacher : Person
{
    public string Subject;
    public decimal Salary;
    
    public void Teach()
    {
        Console.WriteLine(Name + " teaches " + Subject + ".");
    }
}`,
            example2: `// Base class: сите возила ги делат овие
public class Vehicle
{
    public string Brand;
    public int Year;
    public decimal Price;
    
    public void Start()
    {
        Console.WriteLine(Brand + " is starting...");
    }
}

// Car наследува од Vehicle
public class Car : Vehicle
{
    public int Doors;
    public bool HasSunroof;
    
    public void Honk()
    {
        Console.WriteLine(Brand + " car goes: Beep beep!");
    }
}

// Motorcycle наследува од Vehicle
public class Motorcycle : Vehicle
{
    public bool HasSidecar;
    
    public void Wheelie()
    {
        Console.WriteLine(Brand + " motorcycle does a wheelie!");
    }
}

// Truck наследува од Vehicle
public class Truck : Vehicle
{
    public int CargoCapacity;
    public bool HasTrailer;
    
    public void LoadCargo()
    {
        Console.WriteLine(Brand + " truck loading " + CargoCapacity + " tons of cargo.");
    }
}`
        },

        completeExamples: {
            example1: `// Parent Class: Person (основата)
public class Person
{
    public string Name;
    public int Age;
    
    public void Introduce()
    {
        Console.WriteLine("Hi, I'm " + Name + " and I'm " + Age + " years old.");
    }
    
    public void Eat()
    {
        Console.WriteLine(Name + " is eating lunch.");
    }
}

// Child Class: Student (наследува од Person)
public class Student : Person
{
    public string School;
    public string Major;
    
    public void Study()
    {
        Console.WriteLine(Name + " is studying " + Major + " at " + School + ".");
    }
}

// Друга Child Class: Teacher (наследува од Person)
public class Teacher : Person
{
    public string Subject;
    public decimal Salary;
    
    public void Teach()
    {
        Console.WriteLine(Name + " teaches " + Subject + ".");
    }
}

// Користење наследување
Student student = new Student();
student.Name = "Alice";
student.Age = 20;
student.School = "MIT";
student.Major = "CS";

Teacher teacher = new Teacher();
teacher.Name = "Dr. Smith";
teacher.Age = 45;
teacher.Subject = "Math";
teacher.Salary = 60000;

student.Introduce();
student.Study();

teacher.Introduce();
teacher.Teach();`,
            example2: `// Base class: Сите возила ги делат овие
public class Vehicle
{
    public string Brand;
    public int Year;
    public decimal Price;
    
    public void Start()
    {
        Console.WriteLine(Brand + " is starting...");
    }
    
    public void Stop()
    {
        Console.WriteLine(Brand + " is stopping...");
    }
}

// Car наследува од Vehicle
public class Car : Vehicle
{
    public int Doors;
    public bool HasSunroof;
    
    public void Honk()
    {
        Console.WriteLine(Brand + " car goes: Beep beep!");
    }
}

// Motorcycle наследува од Vehicle
public class Motorcycle : Vehicle
{
    public bool HasSidecar;
    
    public void Wheelie()
    {
        Console.WriteLine(Brand + " motorcycle does a wheelie!");
    }
}

// Truck наследува од Vehicle
public class Truck : Vehicle
{
    public int CargoCapacity;
    public bool HasTrailer;
    
    public void LoadCargo()
    {
        Console.WriteLine(Brand + " truck loading " + CargoCapacity + " tons of cargo.");
    }
}

        // Користење на нашата хиерархија на наследување
Car myCar = new Car();
myCar.Brand = "Toyota";
myCar.Year = 2020;
myCar.Doors = 4;
myCar.HasSunroof = true;

Motorcycle myBike = new Motorcycle();
myBike.Brand = "Harley";
myBike.HasSidecar = false;

Truck deliveryTruck = new Truck();
deliveryTruck.Brand = "Ford";
deliveryTruck.CargoCapacity = 5;
deliveryTruck.HasTrailer = true;

myCar.Start();
myCar.Honk();

myBike.Start();
myBike.Wheelie();

deliveryTruck.Start();
deliveryTruck.LoadCargo();`
        },

        currentStep: 0,

        convertCode: function(id) {
            const toggle = document.getElementById(id + "Toggle");
            const isComplete = toggle ? toggle.checked : false;
            const codeBlock = document.getElementById(id + "Code");
            const resultBox = document.getElementById(id + "Result");

            if (codeBlock && toggle) {
                codeBlock.style.transition = 'opacity 0.3s ease';
                codeBlock.style.opacity = '0.5';
                setTimeout(() => {
                    codeBlock.textContent = isComplete ? this.completeExamples[id] : this.simpleExamples[id];
                    codeBlock.style.opacity = '1';

                    if (resultBox && id === 'example1') {
                        resultBox.innerHTML = isComplete ? 
                            '<strong>Output:</strong><br>Hi, I\'m Alice and I\'m 20 years old.<br>Alice is studying CS at MIT.<br>Hi, I\'m Dr. Smith and I\'m 45 years old.<br>Dr. Smith teaches Math.<br><br><em>Magic of Inheritance:</em> Student and Teacher got Name, Age, and Introduce() from Person FOR FREE! They didn\'t need to write that code again. They just added their own special features.' :
                            '<strong>Code Structure:</strong><br>1. Person class with common human properties<br>2. Student inherits from Person, adds School and Study()<br>3. Teacher inherits from Person, adds Subject and Teach()<br><br><em>Toggle to see full example with output!</em>';
                    } else if (resultBox && id === 'example2') {
                        resultBox.innerHTML = isComplete ?
                            '<strong>Output:</strong><br>Toyota is starting...<br>Toyota car goes: Beep beep!<br>Harley is starting...<br>Harley motorcycle does a wheelie!<br>Ford is starting...<br>Ford truck loading 5 tons of cargo.<br><br><em>Power of Inheritance:</em> We wrote Start() and Stop() methods ONLY ONCE in Vehicle class. Car, Motorcycle, and Truck all get them for free! Each child class adds its own special features without repeating common code.' :
                            '<strong>Code Structure:</strong><br>1. Vehicle base class with common vehicle features<br>2. Car inherits, adds doors and honk<br>3. Motorcycle inherits, adds wheelie ability<br>4. Truck inherits, adds cargo capacity<br><br><em>Toggle to see the complete transportation system!</em>';
                    }
                }, 300);
            }
        },

        updateWalkthrough: function(step) {
            const walkthroughCodeBase = document.getElementById('walkthroughCodeBase');
            const walkthroughVariables = document.getElementById('walkthroughVariables');
            const walkthroughExplanation = document.getElementById('walkthroughExplanation');
            const nextStepBtn = document.getElementById('nextStepBtn');

            if (!walkthroughCodeBase || !walkthroughVariables || !walkthroughExplanation) return;

            const data = this.inheritanceSteps[step];
            
            walkthroughCodeBase.textContent = data.code;
            walkthroughVariables.textContent = data.vars;
            walkthroughExplanation.innerHTML = `<em>Step ${step + 1}:</em> ${data.exp}`;
            
            if (step === this.inheritanceSteps.length - 1 && nextStepBtn) {
                walkthroughExplanation.innerHTML += '<br><strong>Complete! Inheritance allows Car to use Vehicle\'s features while adding its own.</strong>';
                nextStepBtn.disabled = true;
            }
        },

        nextStep: function() {
            if (this.currentStep < this.inheritanceSteps.length) {
                this.updateWalkthrough(this.currentStep);
                this.currentStep++;
            }
        },

        checkAnswer: function(quizNum, answer) {
            const resultElement = document.getElementById('quiz' + quizNum + 'Result');
            let isCorrect = false;
            let explanation = '';

            if (quizNum === 1) {
                if (answer === 'B') {
                    isCorrect = true;
                    explanation = '<span style="color: green;">Correct!</span> Student IS A Person, so this inheritance makes sense. Car IS NOT AN Engine, and User IS NOT A Password.';
                } else {
                    explanation = '<span style="color: red;">Incorrect.</span> Remember the "is a" test: Student IS A Person, Car IS NOT AN Engine, User IS NOT A Password.';
                }
            } else if (quizNum === 2) {
                if (answer === 'B') {
                    isCorrect = true;
                    explanation = '<span style="color: green;">Correct!</span> Dog inherits Eat() from Animal AND adds its own Bark() method. Inheritance gives child classes ALL parent methods PLUS their own.';
                } else {
                    explanation = '<span style="color: red;">Incorrect.</span> With inheritance, child classes get ALL methods from their parent PLUS any methods they add themselves.';
                }
            }

            resultElement.innerHTML = explanation;
            resultElement.className = 'quiz-result ' + (isCorrect ? 'correct' : 'incorrect');
        },

        initWalkthrough: function() {
            const nextStepBtn = document.getElementById('nextStepBtn');
            if (nextStepBtn) {
                this.currentStep = 0;
                
                const newButton = nextStepBtn.cloneNode(true);
                nextStepBtn.parentNode.replaceChild(newButton, nextStepBtn);
                
                newButton.addEventListener('click', () => this.nextStep());
                newButton.disabled = false;
                
                this.updateWalkthrough(0);
                this.currentStep = 1;
            }
        },

        initCodeExamples: function() {
            const toggles = document.querySelectorAll('.form-check-input[type="checkbox"]');
            toggles.forEach(toggle => {
                const id = toggle.id.replace('Toggle', '');
                if (id && this.simpleExamples[id]) {
                    this.convertCode(id);
                    toggle.addEventListener('change', () => this.convertCode(id));
                }
            });
        },

        initQuiz: function() {
        },

        init: function() {
            console.log('Initializing OOP Inheritance page');
            this.initCodeExamples();
            this.initWalkthrough();
            this.initQuiz();
            
            if (typeof hljs !== 'undefined') {
                hljs.highlightAll();
            }
        }
    };

    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', () => {
            window.oopInheritance.init();
        });
    } else {
        window.oopInheritance.init();
    }
</script>
</body>