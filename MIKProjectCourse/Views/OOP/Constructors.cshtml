@{
    ViewData["Title"] = "OOP - Конструктори";
}

<div class="container">
    <h1 class="mb-4">Конструктори: Подесување на вашите објекти</h1>

    <p><strong>Конструкторите</strong> се како <strong>тим за подесување</strong> или <strong>иницијализација</strong> на вашите објекти. Кога креирате нов објект од класа, конструкторот се грижи тој да биде подготвен со сите почетни вредности.</p>

    <p>Конструктори гледате насекаде во реалниот живот:</p>
    <ul>
        <li>Кога <strong>нарачувате пица</strong>, веднаш избирате додатоци – тоа се параметри на конструктор</li>
        <li>Кога <strong>купувате нов телефон</strong>, тој доаѓа со основни апликации веќе инсталирани</li>
        <li>Кога <strong>пополнувате формулар за упис на студент</strong>, веднаш внесувате име и возраст</li>
        <li>Кога <strong>градите Lego сет</strong>, првите чекори служат за почетно поставување</li>
    </ul>

    <h2>Што е конструктор?</h2>
    <p>Конструкторот има три важни карактеристики:</p>

    <div class="code-container">
        <div class="code-header">Анатомија на конструктор</div>
        <div class="code-content">
<pre>
         Име на конструктор   Параметри        Код за подесување
               ↓                ↓                    ↓
            <strong>public Student</strong>(<strong>string name, int age</strong>)
      {
            <strong>Name = name;</strong>     ← Го поставува името
            <strong>Age = age;</strong>       ← Ја поставува возраста
      }
</pre>
        </div>
    </div>

    <p>Размислете вака:</p>
    <ul>
        <li><strong>Истото име како класата</strong> → тоа е методот за подесување</li>
        <li><strong>Параметри</strong> → податоци што мора да ги дадете</li>
        <li><strong>Код за подесување</strong> → што се случува при создавање на објектот</li>
    </ul>

    <h2>Проблемот: Празни објекти</h2>
    <div class="code-container">
        <div class="code-header">Без конструктор (тешкиот начин)</div>
        <div class="code-content">
<pre class="language-csharp">
public class Student
{
    public string Name;
    public int Age;
}

// Креирање и рачно подесување
Student s = new Student();
s.Name = "Alex";
s.Age = 20;

// Проблем: ако заборавиме нешто?
Student s2 = new Student();
s2.Name = "Maria";
// Заборавено: s2.Age = 21;
</pre>
        </div>
    </div>
    <div class="result-box">
        <strong>Проблем:</strong> Мора рачно да го поставиме секое својство.<br>
        Лесно е да се заборави нешто и да се добие нецелосен објект.<br>
        <em>Решение: користење конструктор за автоматско подесување!</em>
    </div>

    <h2>Пример 1: Student со конструктор</h2>
    <p>Да создадеме студент кој е подготвен веднаш:</p>

    <div class="code-container">
        <div class="code-header">Student класа со конструктор</div>
        <div class="code-content">
<pre class="language-csharp">
public class Student
{
    public string Name;
    public int Age;

    public Student(string studentName, int studentAge)
    {
        Name = studentName;
        Age = studentAge;
    }

    public void Study()
    {
        Console.WriteLine(Name + " (возраст " + Age + ") учи.");
    }
}

Student alex = new Student("Alex", 20);
Student maria = new Student("Maria", 21);

alex.Study();
maria.Study();
</pre>
        </div>
        <div class="result-box">
            <strong>Излез:</strong><br>
            Alex (возраст 20) учи.<br>
            Maria (возраст 21) учи.<br><br>
            <strong>Предност:</strong> Објектите се целосно подготвени без дополнително подесување.
        </div>
    </div>

    <h2>Чекор по чекор: Како работи конструктор</h2>

    <div class="code-container">
        <div class="code-header">Book класа со конструктор</div>
        <div class="code-content">
<pre class="language-csharp">
public class Book
{
    public string Title;
    public string Author;
    public int Pages;

    public Book(string title, string author, int pages)
    {
        Title = title;
        Author = author;
        Pages = pages;
    }

    public void DisplayInfo()
    {
        Console.WriteLine($"Книга: {Title}");
        Console.WriteLine($"Автор: {Author}");
        Console.WriteLine($"Страници: {Pages}");
    }
}

Book myBook = new Book("Harry Potter", "J.K. Rowling", 400);
myBook.DisplayInfo();
</pre>
        </div>
    </div>

    <h2>Пример 2: Повеќе конструктори (Overloading)</h2>
    <p>Може да имате повеќе конструктори за различни ситуации:</p>

    <div class="code-container">
        <div class="code-header">GameCharacter со повеќе конструктори</div>
        <div class="code-content">
<pre class="language-csharp">
public class GameCharacter
{
    public string Name;
    public int Health;
    public string Weapon;

    public GameCharacter(string name, int health, string weapon)
    {
        Name = name;
        Health = health;
        Weapon = weapon;
    }

    public GameCharacter(string name, int health)
    {
        Name = name;
        Health = health;
        Weapon = "Fists";
    }

    public GameCharacter(string name)
    {
        Name = name;
        Health = 100;
        Weapon = "Fists";
    }
}
</pre>
        </div>
    </div>

    <h2>Пример 3: Конструктор со валидација</h2>

    <div class="code-container">
        <div class="code-header">BankAccount со проверка</div>
        <div class="code-content">
<pre class="language-csharp">
public class BankAccount
{
    public string Owner;
    public decimal Balance;

    public BankAccount(string owner, decimal startingBalance)
    {
        Balance = startingBalance < 0 ? 0 : startingBalance;
        Owner = string.IsNullOrEmpty(owner) ? "Unknown" : owner;
    }
}
</pre>
        </div>
    </div>

    <h2>Default конструктор</h2>
    <p>Ако не дефинирате конструктор, C# автоматски додава празен:</p>

    <div class="code-container">
        <div class="code-header">Автоматски конструктор</div>
        <div class="code-content">
<pre class="language-csharp">
public class Product
{
    public string Name;
    public decimal Price;
}
</pre>
        </div>
    </div>

    <h2>Чести грешки</h2>
    <div class="code-container">
        <div class="code-header">Грешки и решенија</div>
        <div class="code-content">
<pre class="language-csharp">
<span style="color:red; font-weight:bold;">// ГРЕШНО: Името не одговара на класата</span>
public CarSetup(string brand) {}

<span style="color:lightgreen; font-weight:bold;">// ТОЧНО</span>
public Car(string brand) {}
</pre>
        </div>
    </div>

    <h2>Резиме</h2>
    <ul>
        <li><strong>Конструктор</strong> = метод за почетно подесување</li>
        <li>Името мора да биде исто како класата</li>
        <li>Се повикува автоматски при <code>new</code></li>
        <li>Спречува нецелосни објекти</li>
        <li>Може да има повеќе конструктори</li>
        <li>Може да содржи валидација</li>
    </ul>

    <div class="navigation-buttons">
        <a href="@Url.Action("Classes", "OOP")" class="btn btn-outline-primary ajax-link">← Класи</a>
        <a href="@Url.Action("Objects", "OOP")" class="btn btn-primary ajax-link">Следно: Објекти →</a>
    </div>
</div>


<style>
    .container {
        max-width: 800px;
        padding: 20px;
        background-color: var(--bs-body-bg);
    }

    h1, h2, h3 {
        color: var(--bs-heading-color);
        margin-bottom: 15px;
    }

    h1 {
        border-bottom: 2px solid var(--bs-primary);
        padding-bottom: 10px;
    }

    p, li, code {
        color: var(--bs-body-color);
        line-height: 1.6;
    }

    .code-container {
        margin: 25px 0;
        border: 1px solid var(--bs-border-color);
        border-radius: 5px;
        overflow: hidden;
        background-color: var(--code-bg);
    }

    .code-header {
        background-color: var(--code-header-bg);
        padding: 10px 15px;
        border-bottom: 1px solid var(--bs-border-color);
        font-family: 'SFMono-Regular', Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
        font-size: 0.9rem;
        color: var(--bs-body-color);
    }

    .code-content {
        padding: 15px;
        overflow-x: auto;
    }

    pre {
        margin: 0;
        white-space: pre-wrap;
        background-color: transparent;
        font-family: 'SFMono-Regular', Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    }

    .result-box {
        padding: 10px 15px;
        background-color: rgba(0, 123, 255, 0.1);
        border-top: 1px solid var(--bs-border-color);
        font-size: 0.95rem;
    }

    .navigation-buttons {
        display: flex;
        justify-content: space-between;
        margin-top: 30px;
    }

    .btn {
        padding: 8px 20px;
        border-radius: 4px;
        font-weight: 500;
        text-decoration: none;
    }

    .btn-primary {
        background-color: var(--bs-primary);
        border-color: var(--bs-primary);
        color: #fff;
    }

    .btn-outline-primary {
        color: var(--bs-primary);
        border-color: var(--bs-primary);
        background-color: transparent;
    }
</style>

<script>
    function initializePage() {
        if (typeof hljs !== 'undefined') {
            hljs.highlightAll();
        }
    }

    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initializePage);
    } else {
        initializePage();
    }
</script>