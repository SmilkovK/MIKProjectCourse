@{
    ViewData["Title"] = "Input and Output";
}

<div class="container" data-topic="inputoutput">
    <h1 class="mb-4">Input и Output: Комуникација со програмите</h1>

    <p><strong>Input и Output (I/O)</strong> се начинот на кој програмите комуницираат со корисниците. <strong>Input</strong> е информација што корисникот му ја дава на програмот (на пример внесување име), а <strong>Output</strong> е информација што програмот му ја прикажува на корисникот (на пример порака за добредојде).</p>

    <p>Замисли го како разговор:</p>
    <ul>
        <li><strong>Програмата прашува</strong> → „Како се викаш?“ (Output)</li>
        <li><strong>Корисникот одговара</strong> → „Alice“ (Input)</li>
        <li><strong>Програмата одговара</strong> → „Здраво, Alice!“ (Output)</li>
    </ul>

    <h2>Output: Прикажување информации</h2>
    <p>Output е начинот на кој програмата прикажува информации на корисникот. Во C++ се користи <code>cout</code>, а во C# се користи <code>Console.WriteLine()</code>.</p>

    <div class="code-container">
        <div class="code-header">Синтакса за Output</div>
        <div class="code-content">
<pre>
C++:    cout << "Текст за прикажување" << endl;
C#:     Console.WriteLine("Текст за прикажување");

// Прикажување променливи:
C++:    cout << "Твојата возраст: " << age << endl;
C#:     Console.WriteLine("Твојата возраст: " + age);
</pre>
        </div>
    </div>

    <h2>Пример 1: Основен Output</h2>
    <p>Прикажување едноставни пораки и текст:</p>

    <div class="code-container">
        <div class="form-check form-switch mb-2">
            <input class="form-check-input" type="checkbox" id="example1Toggle" onchange="window.convertCode('example1')">
            <label class="form-check-label" for="example1Toggle">Претвори во C#</label>
        </div>
        <div class="code-content">
<pre class="codeBlock" id="example1Code">
// Едноставен текстуален output
cout << "Добредојде во програмирањето!" << endl;
cout << "Ова е линија 1." << endl;
cout << "Ова е линија 2." << endl;

// Текст со специјални карактери
cout << "Користи \\n за нов ред: Прва линија\nВтора линија" << endl;
cout << "Користи \\t за таб: Име:\tJohn" << endl;
cout << "Наводници: Таа рече, \"Здраво!\"" << endl;
</pre>
        </div>
        <div class="result-box" id="example1Result">
            <strong>Резултат:</strong><br>
            Добредојде во програмирањето!<br>
            Ова е линија 1.<br>
            Ова е линија 2.<br>
            Користи \n за нов ред: Прва линија<br>
            Втора линија<br>
            Користи \t за таб: Име:&nbsp;&nbsp;&nbsp;&nbsp;John<br>
            Наводници: Таа рече, "Здраво!"<br>
            <em>Објаснување:</em> <code>endl</code> (C++) или <code>WriteLine</code> (C#) креира нов ред. Специјалните карактери како <code>\n</code> (нов ред) и <code>\t</code> (таб) помагаат за форматирање на текст.
        </div>
    </div>

    <h2>Пример 2: Output со променливи</h2>
    <p>Прикажување вредности на променливи заедно со текст:</p>

    <div class="code-container">
        <div class="form-check form-switch mb-2">
            <input class="form-check-input" type="checkbox" id="example2Toggle" onchange="window.convertCode('example2')">
            <label class="form-check-label" for="example2Toggle">Претвори во C#</label>
        </div>
        <div class="code-content">
<pre class="codeBlock" id="example2Code">
string name = "Sarah";
int age = 25;
float height = 1.68;
bool isStudent = true;

// Прикажување вредности на променливи
cout << "Име: " << name << endl;
cout << "Возраст: " << age << " години" << endl;
cout << "Висина: " << height << " метри" << endl;
cout << "Студент: " << (isStudent ? "Да" : "Не") << endl;

// Повеќе променливи во една линија
cout << name << " има " << age << " години и е висока " << height << " метри." << endl;
</pre>
        </div>
        <div class="result-box" id="example2Result">
            <strong>Резултат:</strong><br>
            Име: Sarah<br>
            Возраст: 25 години<br>
            Висина: 1.68 метри<br>
            Студент: Да<br>
            Sarah има 25 години и е висока 1.68 метри.<br>
            <em>Објаснување:</em> Можеш да комбинираш текст и променливи со <code><<</code> во C++ или <code>+</code> во C#. Компјутерот ги заменува променливите со нивните реални вредности при прикажување.
        </div>
    </div>

    <h2>Input: Внесување информации од корисник</h2>
    <p>Input му овозможува на корисникот да внесе информации во програмата. Во C++ се користи <code>cin</code>, а во C# се користи <code>Console.ReadLine()</code>.</p>

    <div class="code-container">
        <div class="code-header">Синтакса за Input</div>
        <div class="code-content">
<pre>
C++:    cin >> variableName;
C#:     variableName = Console.ReadLine();

// За броеви (во C# е потребна конверзија):
C#:     age = Convert.ToInt32(Console.ReadLine());
</pre>
        </div>
    </div>

    <h2>Пример 3: Основен Input</h2>
    <p>Земање влез од корисник и зачувување во променливи:</p>

    <div class="code-container">
        <div class="form-check form-switch mb-2">
            <input class="form-check-input" type="checkbox" id="example3Toggle" onchange="window.convertCode('example3')">
            <label class="form-check-label" for="example3Toggle">Претвори во C#</label>
        </div>
        <div class="code-content">
<pre class="codeBlock" id="example3Code">
string userName;
int userAge;

// Барање влез
cout << "Како се викаш? ";
cin >> userName;

cout << "Колку години имаш? ";
cin >> userAge;

// Прикажување на внесеното
cout << "Здраво, " << userName << "!" << endl;
cout << "Имаш " << userAge << " години." << endl;

// Пресметка базирана на влез
int birthYear = 2025 - userAge;
cout << "Роден/а си околу " << birthYear << " година." << endl;
</pre>
        </div>
        <div class="result-box" id="example3Result">
            <strong>Резултат (ако корисникот внесе „John“ и „20“):</strong><br>
            Како се викаш? John<br>
            Колку години имаш? 20<br>
            Здраво, John!<br>
            Имаш 20 години.<br>
            Роден/а си околу 2005 година.<br>
            <em>Објаснување:</em> Програмата чека кориснички влез кога ќе стигне до <code>cin</code>. Внесените вредности се зачувуваат во променливи и може да се користат за пресметки или прикажување.
        </div>
    </div>

    <h2>Интерактивен водич: Следење на Input/Output код</h2>
    <p>Погледни како програмата комуницира со корисникот чекор по чекор:</p>

    <h2>Пример 4: Повеќе влезови и пресметки</h2>
    <p>Земање повеќе информации и извршување пресметки:</p>

    <h2>Пример 5: Внес на текст со празни места</h2>
    <p>Земање текст што содржи празни места (на пример цело име):</p>

    <h2>Пример 6: Едноставна поздравна програма</h2>
    <p>Целосна интерактивна програма со input и output:</p>

    <h2>Чести грешки што треба да се избегнат</h2>
    <div class="code-container">
        <div class="code-header">Грешки и решенија за Input/Output</div>
        <div class="code-content">
<pre>
//<span style="color: red;"> ПОГРЕШНО: Заборавена порака за корисникот</span>
cin >> age;  // Корисникот не знае што треба да внесе

//<span style="color: lightgreen;"> ТОЧНО: Секогаш прикажи порака</span>
cout << "Внеси ја твојата возраст: ";
cin >> age;

//<span style="color: red;"> ПОГРЕШНО: Погрешна конверзија во C#</span>
string input = Console.ReadLine();
int age = input;  // ГРЕШКА: string не може директно во int

//<span style="color: lightgreen;"> ТОЧНО: Правилна конверзија во C#</span>
string input = Console.ReadLine();
int age = Convert.ToInt32(input);

//<span style="color: red;"> ПОГРЕШНО: Погрешен оператор во C#</span>
Console.WriteLine("Возраст: " << age);  // ГРЕШКА: C# користи +

//<span style="color: lightgreen;"> ТОЧНО: Користи + </span>
Console.WriteLine("Возраст: " + age);

//<span style="color: red;"> ПОГРЕШНО: Недостасува точка-запирка</span>
cout << "Здраво"  // ГРЕШКА: недостасува ;

//<span style="color: lightgreen;"> ТОЧНО: Секогаш завршувај со ;</span>
cout << "Здраво";
</pre>
        </div>
    </div>

    <h2>Резиме</h2>
    <ul>
        <li><strong>Output (<code>cout</code>/<code>Console.WriteLine</code>)</strong> прикажува информации на корисникот</li>
        <li><strong>Input (<code>cin</code>/<code>Console.ReadLine</code>)</strong> зема информации од корисникот</li>
        <li>Секогаш користи <strong>пораки</strong> за да му кажеш на корисникот што да внесе</li>
        <li>Комбинирај текст и променливи со <code><<</code> (C++) или <code>+</code> (C#)</li>
        <li>Користи <code>getline()</code> за текст со празни места во C++</li>
        <li>Правилно конвертирај внес во C# со <code>Convert.ToInt32()</code> и слично</li>
        <li>Специјалните карактери (<code>\n</code>, <code>\t</code>) помагаат за форматирање</li>
        <li>Input и Output ги прават програмите интерактивни и корисни</li>
    </ul>

    <div class="navigation-buttons">
        <a href="@Url.Action("Variables", "SP")" class="btn btn-outline-primary ajax-link">← Variables</a>
        <a href="@Url.Action("IfElse", "SP")" class="btn btn-primary ajax-link">If-Else →</a>
    </div>
</div>


<style>
    .container {
        max-width: 800px;
        padding: 20px;
        background-color: var(--bs-body-bg);
    }

    h1, h2 {
        color: var(--bs-heading-color);
        margin-bottom: 15px;
    }

    p, li, code {
        color: var(--bs-body-color);
        line-height: 1.6;
    }

    .code-container {
        margin: 25px 0;
        border: 1px solid var(--bs-border-color);
        border-radius: 5px;
        overflow: hidden;
        background-color: var(--code-bg);
    }

    .code-header {
        background-color: var(--code-header-bg);
        padding: 10px 15px;
        border-bottom: 1px solid var(--bs-border-color);
        font-family: 'SFMono-Regular', Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
        font-size: 0.9rem;
        color: var(--bs-body-color);
    }

    .code-content {
        padding: 15px;
        overflow-x: auto;
    }

    pre {
        margin: 0;
        white-space: pre-wrap;
        background-color: transparent;
        font-family: 'SFMono-Regular', Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    }

    .result-box {
        padding: 10px 15px;
        background-color: rgba(0, 123, 255, 0.1);
        border-top: 1px solid var(--bs-border-color);
        font-size: 0.95rem;
    }

    .fade {
        opacity: 0;
        transition: opacity 0.25s ease;
    }

    .navigation-buttons {
        display: flex;
        justify-content: space-between;
        margin-top: 30px;
    }

    .btn {
        padding: 8px 20px;
        border-radius: 4px;
        font-weight: 500;
        text-decoration: none;
    }

    .btn-primary {
        background-color: var(--bs-primary);
        border-color: var(--bs-primary);
        color: #fff;
    }

    .btn-outline-primary {
        color: var(--bs-primary);
        border-color: var(--bs-primary);
        background-color: transparent;
    }
</style>

<script>
// Make all functions and data available globally
window.fullCodeLines = [
    'string name;',
    'int score;',
    'cout << "Enter your name: "; // ⬅ Run Code Block',
    'cin >> name;',
    'cout << "Enter your score: ";',
    'cin >> score;',
    'cout << "Hello " << name << ", your score is " << score << endl;'
];

window.traceSteps = [
    { line: 0, vars: 'name = ?, score = ?', exp: 'Declares a string variable <code>name</code> to store the user\'s name.' },
    { line: 1, vars: 'name = ?, score = ?', exp: 'Declares an integer variable <code>score</code> to store the user\'s score.' },
    { line: 2, vars: 'name = ?, score = ?', exp: 'Displays prompt: "Enter your name: " (User sees this).' },
    { line: 3, vars: 'name = "Alice", score = ?', exp: 'Waits for user input. User types "Alice" and presses Enter. Value "Alice" is stored in <code>name</code>.' },
    { line: 4, vars: 'name = "Alice", score = ?', exp: 'Displays prompt: "Enter your score: " (User sees this).' },
    { line: 5, vars: 'name = "Alice", score = 95', exp: 'Waits for user input. User types "95" and presses Enter. Value 95 is stored in <code>score</code>.' },
    { line: 6, vars: 'name = "Alice", score = 95', exp: 'Displays: "Hello Alice, your score is 95". Uses the values stored in the variables.' }
];

window.cppSnippets = {
            example1: `// Едноставен излез на текст
cout << "Welcome to Programming!" << endl;
cout << "This is line 1." << endl;
cout << "This is line 2." << endl;

    // Текст со специјални знаци
cout << "Use \\n for new line: First line\nSecond line" << endl;
cout << "Use \\t for tab: Name:\tJohn" << endl;
cout << "Quotes: She said, \"Hello!\"" << endl;`,
    example2: `string name = "Sarah";
int age = 25;
float height = 1.68;
bool isStudent = true;

    //Прикажување на променливи вредности
cout << "Name: " << name << endl;
cout << "Age: " << age << " years" << endl;
cout << "Height: " << height << " meters" << endl;
cout << "Student: " << (isStudent ? "Yes" : "No") << endl;

    //Повеќе променливи во еден ред
cout << name << " is " << age << " years old and " << height << " meters tall." << endl;`,
    example3: `string userName;
int userAge;

    //Побарајте влез
cout << "What is your name? ";
cin >> userName;

cout << "How old are you? ";
cin >> userAge;

    //Прикажи што е внесено
cout << "Hello, " << userName << "!" << endl;
cout << "You are " << userAge << " years old." << endl;

    //Пресметајте врз основа на внесеното
int birthYear = 2025 - userAge;
cout << "You were born around " << birthYear << "." << endl;`,
    example4: `int num1, num2, num3;

cout << "=== CALCULATOR ===" << endl;
cout << "Enter first number: ";
cin >> num1;

cout << "Enter second number: ";
cin >> num2;

cout << "Enter third number: ";
cin >> num3;

    //Изведете пресметки
int sum = num1 + num2 + num3;
int average = sum / 3;
int product = num1 * num2 * num3;

    //Прикажи резултати
cout << "\n=== RESULTS ===" << endl;
cout << "Numbers: " << num1 << ", " << num2 << ", " << num3 << endl;
cout << "Sum: " << sum << endl;
cout << "Average: " << average << endl;
cout << "Product: " << product << endl;`,
        example5: `// За низи со празни места во C++, ни треба getline
string fullName;
int age;

    //Прво исчистете го влезниот бафер
cin.ignore();

cout << "Enter your full name: ";
    getline(cin, fullName);  // Добива цела линија, вклучувајќи празни места

cout << "Enter your age: ";
cin >> age;

cout << "\n=== PROFILE ===" << endl;
cout << "Name: " << fullName << endl;
cout << "Age: " << age << endl;
cout << "Initial: " << fullName[0] << endl;  // Прв карактер`,
    example6: `string firstName;
string lastName;
int birthYear;
int currentYear = 2025;

cout << "=== PERSONAL GREETING ===" << endl;

cout << "Enter your first name: ";
cin >> firstName;

cout << "Enter your last name: ";
cin >> lastName;

cout << "Enter your birth year: ";
cin >> birthYear;

// Пресметај возраст
int age = currentYear - birthYear;

    //Креирајте порака за поздравување
cout << "\n=== WELCOME ===" << endl;
cout << "Hello, " << firstName << " " << lastName << "!" << endl;
cout << "You are " << age << " years old." << endl;
cout << "Nice to meet you!" << endl;`
};

window.csharpSnippets = {
        example1: `//Едноставен излез на текст
Console.WriteLine("Welcome to Programming!");
Console.WriteLine("This is line 1.");
Console.WriteLine("This is line 2.");

    //Текст со специјални знаци
Console.WriteLine("Use \\n for new line: First line\nSecond line");
Console.WriteLine("Use \\t for tab: Name:\tJohn");
Console.WriteLine("Quotes: She said, \"Hello!\"");`,
    example2: `string name = "Sarah";
int age = 25;
float height = 1.68f;
bool isStudent = true;

    //Прикажување на променливи вредности
Console.WriteLine("Name: " + name);
Console.WriteLine("Age: " + age + " years");
Console.WriteLine("Height: " + height + " meters");
Console.WriteLine("Student: " + (isStudent ? "Yes" : "No"));

    //Повеќе променливи во еден ред
Console.WriteLine(name + " is " + age + " years old and " + height + " meters tall.");`,
    example3: `string userName;
int userAge;

    //Побарајте влез
Console.Write("What is your name? ");
userName = Console.ReadLine();

Console.Write("How old are you? ");
userAge = Convert.ToInt32(Console.ReadLine());

    //Прикажи што е внесено
Console.WriteLine("Hello, " + userName + "!");
Console.WriteLine("You are " + userAge + " years old.");

    //Пресметајте врз основа на внесување
int birthYear = 2025 - userAge;
Console.WriteLine("You were born around " + birthYear + ".");`,
    example4: `int num1, num2, num3;

Console.WriteLine("=== CALCULATOR ===");
Console.Write("Enter first number: ");
num1 = Convert.ToInt32(Console.ReadLine());

Console.Write("Enter second number: ");
num2 = Convert.ToInt32(Console.ReadLine());

Console.Write("Enter third number: ");
num3 = Convert.ToInt32(Console.ReadLine());

    //Изведете пресметки
int sum = num1 + num2 + num3;
int average = sum / 3;
int product = num1 * num2 * num3;

//Прикажи резултати
Console.WriteLine("\n=== RESULTS ===");
Console.WriteLine("Numbers: " + num1 + ", " + num2 + ", " + num3);
Console.WriteLine("Sum: " + sum);
Console.WriteLine("Average: " + average);
Console.WriteLine("Product: " + product);`,
        example5: `// C# автоматски обработува празни места со ReadLine.
string fullName;
int age;

Console.Write("Enter your full name: ");
    fullName = Console.ReadLine();  // Добива цела линија, вклучувајќи празни места

Console.Write("Enter your age: ");
age = Convert.ToInt32(Console.ReadLine());

Console.WriteLine("\n=== PROFILE ===");
Console.WriteLine("Name: " + fullName);
Console.WriteLine("Age: " + age);
Console.WriteLine("Initial: " + fullName[0]);  // Прв карактер`,
    example6: `string firstName;
string lastName;
int birthYear;
int currentYear = 2025;

Console.WriteLine("=== PERSONAL GREETING ===");

Console.Write("Enter your first name: ");
firstName = Console.ReadLine();

Console.Write("Enter your last name: ");
lastName = Console.ReadLine();

Console.Write("Enter your birth year: ");
birthYear = Convert.ToInt32(Console.ReadLine());

// Пресметај возраст
int age = currentYear - birthYear;

// Создади порака за поздравување
Console.WriteLine("\n=== WELCOME ===");
Console.WriteLine("Hello, " + firstName + " " + lastName + "!");
Console.WriteLine("You are " + age + " years old.");
Console.WriteLine("Nice to meet you!");`
};

// Function to convert code between C++ and C#
window.convertCode = function(id) {
    console.log("Converting code for:", id);
    const toggle = document.getElementById(id + "Toggle");
    const isCSharp = toggle ? toggle.checked : false;
    const codeBlock = document.getElementById(id + "Code");
    
    if (!codeBlock) {
        console.error("Code block not found for:", id);
        return;
    }
    
    codeBlock.classList.add("fade");
    setTimeout(() => {
        const newCode = isCSharp ? window.csharpSnippets[id] : window.cppSnippets[id];
        if (newCode) {
            codeBlock.textContent = newCode;
        }
        codeBlock.classList.remove("fade");
    }, 250);
};

window.updateWalkthrough = function(step) {
    const walkthroughCodeBase = document.getElementById('walkthroughCodeBase');
    const walkthroughVariables = document.getElementById('walkthroughVariables');
    const walkthroughExplanation = document.getElementById('walkthroughExplanation');
    
    if (!walkthroughCodeBase || !walkthroughVariables || !walkthroughExplanation) return;
    
    const data = window.traceSteps[step];
    let codeContent = '';
    const activeLineIndex = data.line;
    
    window.fullCodeLines.forEach((line, index) => {
        if (index === activeLineIndex) {
            codeContent += `<span style="background-color: yellow; color: black;">${line.replace('// ⬅ Run Code Block', '⬅ ACTIVE')}</span>\n`;
        } else if (line.includes('// ⬅ Run Code Block')) {
            codeContent += `// ${line.replace('// ⬅ Run Code Block', '').trim()}\n`;
        } else if (activeLineIndex >= 2 && activeLineIndex <= 6 && index < 2) {
            codeContent += `${line}\n`;
        } else if (index !== activeLineIndex) {
            codeContent += `// ${line.trim()}\n`;
        }
    });
    
    walkthroughCodeBase.innerHTML = codeContent;
    walkthroughVariables.textContent = data.vars;
    walkthroughExplanation.innerHTML = `<em>Explanation:</em> ${data.exp}`;
    
    if (step === window.traceSteps.length - 1) {
        walkthroughExplanation.innerHTML += '<br><strong>Trace finished! Program displays: "Hello Alice, your score is 95"</strong>';
        const nextStepBtn = document.getElementById('nextStepBtn');
        if (nextStepBtn) {
            nextStepBtn.disabled = true;
        }
    }
};

window.nextStepHandler = function() {
    if (window.currentTraceStep < window.traceSteps.length) {
        if (typeof window.updateWalkthrough === 'function') {
            window.updateWalkthrough(window.currentTraceStep);
            window.currentTraceStep++;
        }
    }
};

// Initialize all code examples on page load
function initializeCodeExamples() {
    console.log("Initializing Input/Output page code examples");
    for (let i = 1; i <= 6; i++) {
        const toggle = document.getElementById(`example${i}Toggle`);
        const codeBlock = document.getElementById(`example${i}Code`);
        if (toggle && codeBlock) {
            const isCSharp = toggle.checked;
            const newCode = isCSharp ? window.csharpSnippets[`example${i}`] : window.cppSnippets[`example${i}`];
            if (newCode) {
                codeBlock.textContent = newCode;
            }
        }
    }
}

function initializeWalkthrough() {
    console.log("Initializing Input/Output walkthrough");
    const nextStepBtn = document.getElementById('nextStepBtn');
    if (nextStepBtn) {
        window.currentTraceStep = 0;
        
        if (typeof window.updateWalkthrough === 'function') {
            window.updateWalkthrough(0);
            window.currentTraceStep = 1;
        }
        
        nextStepBtn.disabled = false;
    }
}

document.addEventListener('DOMContentLoaded', function() {
    console.log("DOM loaded, initializing Input/Output page");
    initializeCodeExamples();
    initializeWalkthrough();
});

if (document.readyState === 'complete' || document.readyState === 'interactive') {
    setTimeout(function() {
        console.log("Document ready, initializing Input/Output page");
        initializeCodeExamples();
        initializeWalkthrough();
    }, 100);
}

window.initializeInputOutputPage = function() {
    console.log("Initializing Input/Output page via global function");
    initializeCodeExamples();
    initializeWalkthrough();
};
</script>