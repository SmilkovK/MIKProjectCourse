@{
    ViewData["Title"] = "If Else";
}

<body data-topic="ifelse">
    <div class="container">
        <h1 class="mb-4">If - Else: Донесување одлуки во код</h1>

        <p><strong>If-Else изразите</strong> се носители на одлуки во програмирањето. Тие му овозможуваат на програмот да <strong>избере различни патеки</strong> врз основа на услови, исто како што носиш одлуки во секојдневниот живот.</p>

        <p>Оваа логика ја користиш секој ден:</p>
        <ul>
            <li>Ако врне → земи чадор</li>
            <li>Ако си гладен → јади нешто</li>
            <li>Ако семафорот е црвен → застани</li>
            <li>Ако ти е роденден → слави</li>
        </ul>

        <h2>Основна структура</h2>
        <p><strong>If израз</strong> проверува услов во загради <code>()</code>. Ако условот е точен, кодот во виткастите загради <code>{}</code> се извршува.</p>

        <div class="code-container">
            <div class="code-header">Синтакса на If израз</div>
            <div class="code-content">
<pre>
if (condition) {
    // Код што се извршува САМО ако условот е точен
}
</pre>
            </div>
        </div>

        <div class="code-container">
            <div class="code-header">Синтакса на If-Else израз</div>
            <div class="code-content">
<pre>
if (condition) {
    // Код што се извршува ако условот е TRUE
} else {
    // Код што се извршува ако условот е FALSE
}
</pre>
            </div>
        </div>

        <h2>Пример 1: Основна проверка на возраст</h2>
        <p>Проверка дали некој е доволно стар за гласање:</p>

        <div class="code-container">
            <div class="form-check form-switch mb-2">
                <input class="form-check-input" type="checkbox" id="example1Toggle" onchange="convertCode('example1')">
                <label class="form-check-label" for="example1Toggle">Претвори во C#</label>
            </div>
            <div class="code-content">
<pre class="codeBlock" id="example1Code">
int age = 20;

if (age >= 18) {
    cout << "You can vote!" << endl;
} else {
    cout << "You cannot vote yet." << endl;
}
</pre>
            </div>
            <div class="result-box" id="example1Result">
                <strong>Резултат:</strong> You can vote!<br>
                <em>Објаснување:</em> Условот <code>age >= 18</code> е точен (20 ≥ 18), па кодот во <strong>if</strong> блокот се извршува.
            </div>
        </div>

        <h2>Пример 2: Едноставен If (без Else)</h2>
        <p>Понекогаш сакаш нешто да се изврши само кога условот е точен, а ништо да не се случи кога е неточен.</p>

        <div class="code-container">
            <div class="form-check form-switch mb-2">
                <input class="form-check-input" type="checkbox" id="example2Toggle" onchange="convertCode('example2')">
                <label class="form-check-label" for="example2Toggle">Претвори во C#</label>
            </div>
            <div class="code-content">
<pre class="codeBlock" id="example2Code">
int score = 85;
int passingScore = 60;

if (score >= passingScore) {
    cout << "Congratulations! You passed!" << endl;
}

// Овој код се извршува без разлика на if изразот
cout << "Your score: " << score << endl;
</pre>
            </div>
            <div class="result-box" id="example2Result">
                <strong>Резултат:</strong><br>Congratulations! You passed!<br>Your score: 85<br>
                <em>Објаснување:</em> Бидејќи 85 ≥ 60, се печати пораката за честитка. Втората линија секогаш се печати бидејќи е надвор од if блокот.
            </div>
        </div>

        <h2>Интерактивен водич: Следење на одлуката</h2>
        <p>Погледни како програмата носи одлука чекор по чекор:</p>

        <h2>Пример 3: Повеќе услови (Else If)</h2>
        <p>Кога имаш повеќе од два можни исходи, користи <strong>else if</strong> за да провериш дополнителни услови.</p>

        <h2>Пример 4: Проверка на температура</h2>
        <p>Практичен пример со температурни опсези:</p>

        <h2>Пример 5: Споредување стрингови</h2>
        <p>Можеш да споредуваш и текст (стрингови) во услови:</p>

        <h2>Пример 6: Комплексни услови</h2>
        <p>Користење на логички оператори (<code>&&</code> за AND, <code>||</code> за OR) за креирање покомплексни услови:</p>

        <h2>Визуелен дијаграм: Тек на одлуки</h2>

        <h2>Чести грешки што треба да се избегнат</h2>
        <div class="code-container">
            <div class="code-header">Примери со грешки</div>
            <div class="code-content">
<pre>
// <span style="color: red;">ПОГРЕШНО: Користење = наместо == за споредување </span>
if (age = 18) {  // ОВА ДОДЕЛУВА 18 на age, не споредува!
    cout << "You're 18";
}

// <span style="color: lightgreen;">ТОЧНО: Користи == за споредување </span> 
if (age == 18) {
    cout << "You're 18";
}

// <span style="color: red;">ПОГРЕШНО: Недостасуваат загради за повеќе наредби </span>
if (score > 50)
    cout << "Good job!";
    cout << "Keep it up!";  // ОВА СЕКОГАШ се извршува!

// <span style="color: lightgreen;">ТОЧНО: Користи загради за повеќе наредби</span>
if (score > 50) {
    cout << "Good job!";
    cout << "Keep it up!";
}
</pre>
            </div>
        </div>

        <h2>Резиме</h2>
        <ul>
            <li><strong>If изразите</strong> извршуваат код само кога условот е точен</li>
            <li><strong>Else изразите</strong> нудат алтернатива кога условот е неточен</li>
            <li><strong>Else if изразите</strong> овозможуваат проверка на повеќе услови по ред</li>
            <li>Користи <strong>оператори за споредба</strong>: <code>==</code>, <code>!=</code>, <code>></code>, <code><</code>, <code>>=</code>, <code><=</code></li>
            <li>Користи <strong>логички оператори</strong>: <code>&&</code> (AND), <code>||</code> (OR) за сложени услови</li>
            <li>Секогаш користи <strong>загради <code>{}</code></strong>, особено кога има повеќе наредби</li>
            <li>Условите се проверуваат <strong>од горе надолу</strong> – првиот точен услов победува</li>
        </ul>

        <div class="navigation-buttons">
            <a href="@Url.Action("InputOutput", "SP")" class="btn btn-outline-primary ajax-link">← Input - Output</a>
            <a href="@Url.Action("ForLoops", "SP")" class="btn btn-primary ajax-link">For Loops →</a>
        </div>
    </div>


    <style>
        .container {
            max-width: 800px;
            padding: 20px;
            background-color: var(--bs-body-bg);
        }

        h1, h2 {
            color: var(--bs-heading-color);
            margin-bottom: 15px;
        }

        p, li, code {
            color: var(--bs-body-color);
            line-height: 1.6;
        }

        .code-container {
            margin: 25px 0;
            border: 1px solid var(--bs-border-color);
            border-radius: 5px;
            overflow: hidden;
            background-color: var(--code-bg);
        }

        .code-header {
            background-color: var(--code-header-bg);
            padding: 10px 15px;
            border-bottom: 1px solid var(--bs-border-color);
            font-family: 'SFMono-Regular', Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
            font-size: 0.9rem;
            color: var(--bs-body-color);
        }

        .code-content {
            padding: 15px;
            overflow-x: auto;
        }

        pre {
            margin: 0;
            white-space: pre-wrap;
            background-color: transparent;
            font-family: 'SFMono-Regular', Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
        }

        .result-box {
            padding: 10px 15px;
            background-color: rgba(0, 123, 255, 0.1);
            border-top: 1px solid var(--bs-border-color);
            font-size: 0.95rem;
        }

        .fade {
            opacity: 0;
            transition: opacity 0.25s ease;
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        .btn {
            padding: 8px 20px;
            border-radius: 4px;
            font-weight: 500;
            text-decoration: none;
        }

        .btn-primary {
            background-color: var(--bs-primary);
            border-color: var(--bs-primary);
            color: #fff;
        }

        .btn-outline-primary {
            color: var(--bs-primary);
            border-color: var(--bs-primary);
            background-color: transparent;
        }
    </style>

<script>
// Make all functions and data available globally
window.fullCodeLines = [
    'int temperature = 25;',
    'if (temperature > 20) {',
    '    cout << "Nice weather!" << endl; // ⬅ Run Code Block',
    '} else {',
    '    cout << "It\'s cold!" << endl;',
    '}'
];

window.traceSteps = [
    { line: 0, vars: 'temperature = 25', exp: 'Sets the temperature variable to 25.' },
    { line: 1, vars: 'temperature = 25', exp: 'Checks condition: is <code>temperature > 20</code>? 25 > 20 is <strong>TRUE</strong>.' },
    { line: 2, vars: 'temperature = 25', exp: 'Condition is TRUE, so this code runs. Prints "Nice weather!"' },
    { line: 4, vars: 'temperature = 25', exp: 'Skips the else block because the if condition was true.' }
];

window.cppSnippets = {
    example1: `int age = 20;

if (age >= 18) {
    cout << "You can vote!" << endl;
} else {
    cout << "You cannot vote yet." << endl;
}`,
    example2: `int score = 85;
int passingScore = 60;

if (score >= passingScore) {
    cout << "Congratulations! You passed!" << endl;
}

cout << "Your score: " << score << endl;`,
    example3: `int grade = 85;

if (grade >= 90) {
    cout << "Grade: A - Excellent!" << endl;
}
else if (grade >= 80) {
    cout << "Grade: B - Very Good!" << endl;
}
else if (grade >= 70) {
    cout << "Grade: C - Good!" << endl;
}
else if (grade >= 60) {
    cout << "Grade: D - Pass" << endl;
}
else {
    cout << "Grade: F - Try again!" << endl;
}`,
    example4: `int temperature = 30;

if (temperature > 35) {
    cout << "It's very hot! Stay hydrated." << endl;
}
else if (temperature > 25) {
    cout << "Nice and warm. Perfect weather!" << endl;
}
else if (temperature > 15) {
    cout << "Pleasant weather. Enjoy!" << endl;
}
else if (temperature > 0) {
    cout << "It's cold. Wear a jacket." << endl;
}
else {
    cout << "Freezing! Stay warm." << endl;
}`,
    example5: `string day = "Saturday";

if (day == "Saturday" || day == "Sunday") {
    cout << "It's the weekend! Time to relax." << endl;
} else if (day == "Friday") {
    cout << "TGIF! Almost weekend." << endl;
} else {
    cout << "It's a weekday. Time to work!" << endl;
}`,
    example6: `int age = 16;
bool hasPermission = true;

if (age >= 18) {
    cout << "You can watch any movie." << endl;
}
else if (age >= 13 && hasPermission) {
    cout << "You can watch PG-13 movies with permission." << endl;
}
else if (age >= 13) {
    cout << "You need permission for PG-13 movies." << endl;
}
else {
    cout << "You can only watch PG movies." << endl;
}`
};

window.csharpSnippets = {
    example1: `int age = 20;

if (age >= 18)
{
    Console.WriteLine("You can vote!");
}
else
{
    Console.WriteLine("You cannot vote yet.");
}`,
    example2: `int score = 85;
int passingScore = 60;

if (score >= passingScore)
{
    Console.WriteLine("Congratulations! You passed!");
}

Console.WriteLine("Your score: " + score);`,
    example3: `int grade = 85;

if (grade >= 90)
{
    Console.WriteLine("Grade: A - Excellent!");
}
else if (grade >= 80)
{
    Console.WriteLine("Grade: B - Very Good!");
}
else if (grade >= 70)
{
    Console.WriteLine("Grade: C - Good!");
}
else if (grade >= 60)
{
    Console.WriteLine("Grade: D - Pass");
}
else
{
    Console.WriteLine("Grade: F - Try again!");
}`,
    example4: `int temperature = 30;

if (temperature > 35)
{
    Console.WriteLine("It's very hot! Stay hydrated.");
}
else if (temperature > 25)
{
    Console.WriteLine("Nice and warm. Perfect weather!");
}
else if (temperature > 15)
{
    Console.WriteLine("Pleasant weather. Enjoy!");
}
else if (temperature > 0)
{
    Console.WriteLine("It's cold. Wear a jacket.");
}
else
{
    Console.WriteLine("Freezing! Stay warm.");
}`,
    example5: `string day = "Saturday";

if (day == "Saturday" || day == "Sunday")
{
    Console.WriteLine("It's the weekend! Time to relax.");
}
else if (day == "Friday")
{
    Console.WriteLine("TGIF! Almost weekend.");
}
else
{
    Console.WriteLine("It's a weekday. Time to work!");
}`,
    example6: `int age = 16;
bool hasPermission = true;

if (age >= 18)
{
    Console.WriteLine("You can watch any movie.");
}
else if (age >= 13 && hasPermission)
{
    Console.WriteLine("You can watch PG-13 movies with permission.");
}
else if (age >= 13)
{
    Console.WriteLine("You need permission for PG-13 movies.");
}
else
{
    Console.WriteLine("You can only watch PG movies.");
}`
};

window.currentTraceStep = 0;

window.convertCode = function(id) {
    console.log("Converting code for:", id);
    const toggle = document.getElementById(id + "Toggle");
    const isCSharp = toggle ? toggle.checked : false;
    const codeBlock = document.getElementById(id + "Code");
    
    if (!codeBlock) {
        console.error("Code block not found for:", id);
        return;
    }
    
    codeBlock.classList.add("fade");
    setTimeout(() => {
        const newCode = isCSharp ? window.csharpSnippets[id] : window.cppSnippets[id];
        if (newCode) {
            codeBlock.textContent = newCode;
        }
        codeBlock.classList.remove("fade");
    }, 250);
};

window.updateWalkthrough = function(step) {
    const walkthroughCodeBase = document.getElementById('walkthroughCodeBase');
    const walkthroughVariables = document.getElementById('walkthroughVariables');
    const walkthroughExplanation = document.getElementById('walkthroughExplanation');
    
    if (!walkthroughCodeBase || !walkthroughVariables || !walkthroughExplanation) return;
    
    const data = window.traceSteps[step];
    let codeContent = '';
    const activeLineIndex = data.line;
    
    window.fullCodeLines.forEach((line, index) => {
        if (index === activeLineIndex) {
            codeContent += `<span style="background-color: yellow; color: black;">${line.replace('// ⬅ Run Code Block', '⬅ ACTIVE')}</span>\n`;
        } else if (line.includes('// ⬅ Run Code Block')) {
            codeContent += `// ${line.replace('// ⬅ Run Code Block', '').trim()}\n`;
        } else if (index === 1 && activeLineIndex !== 1 && activeLineIndex !== 2) {
            codeContent += `// ${line.trim()}\n`;
        } else if (index > 1 && activeLineIndex < 2) {
            codeContent += `// ${line.trim()}\n`;
        } else if (index !== activeLineIndex) {
            codeContent += `${line}\n`;
        }
    });
    
    walkthroughCodeBase.innerHTML = codeContent;
    walkthroughVariables.textContent = data.vars;
    walkthroughExplanation.innerHTML = `<em>Explanation:</em> ${data.exp}`;
    
    if (step === window.traceSteps.length - 1) {
        walkthroughExplanation.innerHTML += '<br><strong>Trace finished! Output: "Nice weather!"</strong>';
        const nextStepBtn = document.getElementById('nextStepBtn');
        if (nextStepBtn) {
            nextStepBtn.disabled = true;
        }
    }
};

function initializeCodeExamples() {
    console.log("Initializing code examples");
    for (let i = 1; i <= 6; i++) {
        const toggle = document.getElementById(`example${i}Toggle`);
        const codeBlock = document.getElementById(`example${i}Code`);
        if (toggle && codeBlock) {
            const isCSharp = toggle.checked;
            const newCode = isCSharp ? window.csharpSnippets[`example${i}`] : window.cppSnippets[`example${i}`];
            if (newCode) {
                codeBlock.textContent = newCode;
            }
        }
    }
}

function initializeWalkthrough() {
    console.log("Initializing walkthrough");
    const nextStepBtn = document.getElementById('nextStepBtn');
    if (nextStepBtn) {
        window.currentTraceStep = 0;
        
        if (typeof window.updateWalkthrough === 'function') {
            window.updateWalkthrough(0);
            window.currentTraceStep = 1;
        }
        
        nextStepBtn.disabled = false;
    }
}

document.addEventListener('DOMContentLoaded', function() {
    console.log("DOM loaded, initializing If-Else page");
    initializeCodeExamples();
    initializeWalkthrough();
});

if (document.readyState === 'complete' || document.readyState === 'interactive') {
    setTimeout(function() {
        console.log("Document ready, initializing If-Else page");
        initializeCodeExamples();
        initializeWalkthrough();
    }, 100);
}
</script>
</body>